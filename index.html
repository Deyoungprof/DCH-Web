<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deyoungprof Creative Hub — Forward‑Thinking Design Studio in Lagos</title>
  <meta name="description" content="Deyoungprof Creative Hub is a forward-thinking design studio in Lagos, Nigeria. We craft standout designs — logos, brand kits, flyers, wedding and event graphics, academic covers, and more.">
  <meta name="theme-color" content="#0A0F1C">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/lucide@latest"></script>
  <!-- PWA Manifest -->
<link rel="manifest" href="./manifest.json">
<link rel="apple-touch-icon" href="/logo.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <style>
:root {
  --bg-primary: #0A0F1C;
  --bg-secondary: #0B1224;
  --bg-tertiary: #0B0F19;
  --text-primary: rgba(255, 255, 255, 0.9);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.6);
  --border-color: rgba(255, 255, 255, 0.1);
  --accent-color: #FF6B00;
  --header-bg: rgba(10, 15, 28, 0.8);
  --card-bg: rgba(255, 255, 255, 0.05);
  --card-hover-bg: rgba(255, 255, 255, 0.1);
}

[data-theme="light"] {
  --bg-primary: #FFFFFF;
  --bg-secondary: #F8F9FA;
  --bg-tertiary: #F1F3F5;
  --text-primary: rgba(0, 0, 0, 0.9);
  --text-secondary: rgba(0, 0, 0, 0.7);
  --text-tertiary: rgba(0, 0, 0, 0.6);
  --border-color: rgba(0, 0, 0, 0.15);
  --accent-color: #FF6B00;
  --header-bg: rgba(255, 255, 255, 0.7);
  --card-bg: rgba(0, 0, 0, 0.03);
  --card-hover-bg: rgba(0, 0, 0, 0.06);
}

* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

body {
  scroll-behavior: smooth;
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  position: relative;
  isolation: isolate;
}

/* Mobile logo optimization */
@media (max-width: 640px) {
  #site-header .h-12.w-12 {
    height: 40px;
    width: 40px;
  }
  
  #site-header .flex.flex-col.leading-none {
    display: flex !important;
  }
  
  #site-header .flex.flex-col.leading-none span {
    font-size: 0.75rem;
  }
  
  #site-header .flex.flex-col.leading-none span:first-child {
    font-size: 0.875rem;
  }
  
  #headerLogo, #headerLogoFallback {
    font-size: 18px;
  }
}

/* Ensure logo visibility */
#headerLogo, #footerLogo {
  object-fit: contain;
  padding: 4px;
}

/* Light mode specific adjustments */
[data-theme="light"] .bg-\[\#0A0F1C\]\/98,
[data-theme="light"] .bg-\[\#0A0F1C\]\/95,
[data-theme="light"] .bg-\[\#0A0F1C\]\/80,
[data-theme="light"] .bg-black\/90,
[data-theme="light"] .bg-black\/70 {
  background-color: rgba(255, 255, 255, 0.7) !important;
  border-color: var(--border-color) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
}

[data-theme="light"] .text-white,
[data-theme="light"] .text-white\/90,
[data-theme="light"] .text-white\/80,
[data-theme="light"] .text-white\/70,
[data-theme="light"] .text-white\/60,
[data-theme="light"] .text-white\/50 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .border-white\/10,
[data-theme="light"] .border-white\/20 {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .bg-white\/5,
[data-theme="light"] .bg-white\/10 {
  background-color: var(--card-bg) !important;
}

[data-theme="light"] .hover\:bg-white\/5:hover,
[data-theme="light"] .hover\:bg-white\/10:hover {
  background-color: var(--card-hover-bg) !important;
}

/* Fix loading overlay in light mode */
[data-theme="light"] .loading-overlay {
  background: rgba(255, 255, 255, 0.95);
}

[data-theme="light"] .loading-overlay .text-white\/80,
[data-theme="light"] .loading-overlay .text-white\/50 {
  color: rgba(0, 0, 0, 0.8) !important;
}

/* Fix hero gradient in light mode */
[data-theme="light"] #home .absolute.inset-0.-z-10 {
  opacity: 1 !important;
}
    
/* Light gray hero background in light mode - lighter at top */
[data-theme="light"] #home .bg-gradient-to-b {
  background: linear-gradient(to bottom, rgba(241, 245, 249, 0.85), rgba(226, 232, 240, 0.85)) !important;
}

[data-theme="light"] #home .absolute.inset-0.-z-10 {
  opacity: 1 !important;
}

[data-theme="light"] #home h1 {
  color: #111827 !important;
}

[data-theme="light"] #home p {
  color: #374151 !important;
}

[data-theme="light"] #home .rounded-full.border {
  background-color: white !important;
  border-color: #d1d5db !important;
  color: #4b5563 !important;
}

/* Make background image visible in light mode */
[data-theme="light"] #hero-bg-image {
  filter: invert(1) !important;
  opacity: 0.12 !important;
  mix-blend-mode: multiply !important;
}

/* Change background image in light mode */
[data-theme="light"] #hero-bg-image {
  background-image: url('https://i.shgcdn.com/df9b4b39-4cb1-4154-90f5-697f2509131b/-/format/auto/-/quality/normal/') !important;
  filter: invert(1) !important;
  opacity: 0.05 !important;
  mix-blend-mode: multiply !important;
}

#carouselTrack {
  font-size: 0;
  letter-spacing: 0;
}

#carouselTrack > div {
  font-size: 1rem; /* Reset font-size for children */
}

@media (max-width: 640px) {
  /* Carousel container - keep reasonable size */
  #carousel {
    aspect-ratio: 4/5;
    min-height: 400px;
  }
  
  /* Carousel slides - maintain structure */
  #carouselTrack > div > div {
    display: flex !important;
    flex-direction: column !important;
    background: var(--bg-primary) !important;
    height: 100%;
  }
  
 /* Image should fit naturally without zooming */
  #carouselTrack img {
    position: relative !important;
    object-fit: contain !important;
    width: 100% !important;
    height: 100% !important;
  }
  
  /* Text overlay stays at bottom - VISIBLE */
  #carouselTrack .absolute.bottom-0 {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    padding: 1rem !important;
    background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 70%, transparent 100%) !important;
    z-index: 10 !important;
  }
  
  /* Keep gradient overlay */
  #carouselTrack .bg-gradient-to-t {
    display: block !important;
  }
  
  /* Hide hover effect on mobile */
  #carouselTrack .absolute.inset-0.flex {
    display: none !important;
  }
  
  /* Make text visible and readable */
  #carouselTrack .absolute.bottom-0 span,
  #carouselTrack .absolute.bottom-0 p {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    color: white !important;
    position: relative !important;
    z-index: 11 !important;
  }
  
  /* Badge spacing */
  #carouselTrack .absolute.bottom-0 span.inline-flex {
    margin-bottom: 0.5rem;
  }
  
  /* Text styling for mobile */
  #carouselTrack .absolute.bottom-0 p {
    font-size: 0.875rem;
    line-height: 1.4;
  }
  
  #prevSlide, #nextSlide {
    padding: 0.75rem !important;
    width: 44px;
    height: 44px;
  }
  
  #carouselDots button {
    width: 32px !important;
    height: 8px !important;
  }
  
  #prevCard, #nextCard {
    padding: 0.75rem 1rem !important;
    min-height: 44px;
  }
  
  #closeGallery, #closeLightbox {
    padding: 0.75rem !important;
    width: 44px;
    height: 44px;
  }
  
  .stack-card {
    width: 90% !important;
  }
  
  #site-header {
    position: fixed !important;
    z-index: 100;
  }
  
  #mobileMenuBtn {
    padding: 0.75rem !important;
    width: 44px;
    height: 44px;
  }
  
  section {
    scroll-margin-top: 6rem;
  }
  
  h1 {
    font-size: 2.25rem !important;
    line-height: 1.2 !important;
  }
  
  h2 {
    font-size: 1.75rem !important;
  }
  
  .card-stack {
    height: 400px !important;
  }
  
  #portfolioGallery .px-4,
  #imageLightbox .px-4 {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  #contactForm input,
  #contactForm textarea {
    font-size: 16px !important;
  }
  
  #contactForm button,
  #contactForm a {
    width: 100%;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .text-5xl {
    font-size: 2rem !important;
  }
  
  .text-6xl {
    font-size: 2.5rem !important;
  }
  
  a, button {
    min-height: 44px;
    min-width: 44px;
  }
  
  #heroHighlights {
    grid-template-columns: 1fr !important;
  }
  
  /* ← ADD NEW CODE HERE */
  #home .grid {
    gap: 2rem !important;
  }
  
  #home .flex-col.sm\:flex-row {
    flex-direction: column !important;
    width: 100%;
  }
  
  #home .flex-col.sm\:flex-row > * {
    width: 100% !important;
  }
  
  /* Fix button overflow */
  .inline-flex.items-center {
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
  }
  
  /* Fix hero highlights */
  #heroHighlights > div {
    min-width: 0;
  }
  
  /* Ensure proper spacing */
  section > div {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* Centralize hero content on mobile */
  #home .grid {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    text-align: center !important;
  }
  
  #home .grid > div:first-child {
    order: 1;
    max-width: 100%;
  }
  
  #home .grid > div:last-child {
    order: 2;
    width: 100%;
  }
  
  /* Center hero buttons */
  #home .flex.flex-col.sm\:flex-row {
    justify-content: center !important;
  }
  
  /* Center hero highlights */
  #heroHighlights {
    justify-content: center !important;
  }

  
} ← CLOSING BRACE OF MEDIA QUERY

    .img-placeholder {
      background: linear-gradient(135deg, rgba(255,107,0,0.15) 0%, rgba(255,107,0,0.05) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .img-placeholder::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,107,0,0.03) 10px, rgba(255,107,0,0.03) 20px),
        repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255,107,0,0.03) 10px, rgba(255,107,0,0.03) 20px);
    }
    
    .img-placeholder-text {
      position: relative;
      z-index: 1;
      color: rgba(255,255,255,0.4);
      font-size: 0.875rem;
      text-align: center;
      padding: 1rem;
    }

    /* Card Stack Gallery Styles */
    .card-stack-container {
      position: relative;
      perspective: 1000px;
    }

    .card-stack {
      position: relative;
      width: 100%;
      height: 500px;
      overflow: hidden;
      isolation: isolate;
      transition: opacity 0.3s ease;
    }

    .stack-card {
      position: absolute;
      width: 80%;
      max-width: 100%;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 12px;
      overflow: hidden;
      will-change: transform, opacity;
      backface-visibility: hidden;
    }

    .stack-card.featured {
      z-index: 30;
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .stack-card.left {
      z-index: 20;
      transform: translate(-120%, -50%) scale(0.85) rotateY(15deg);
      opacity: 0.7;
    }

    .stack-card.right {
      z-index: 20;
      transform: translate(20%, -50%) scale(0.85) rotateY(-15deg);
      opacity: 0.7;
    }

    .stack-card.hidden {
      z-index: 10;
      transform: translate(-50%, -50%) scale(0.7);
      opacity: 0;
      pointer-events: none;
    }

    img {
      display: block;
    }

    /* Modal and Overlay Z-index Fixes */
    #portfolioGallery {
      isolation: isolate;
    }

    #imageLightbox {
      isolation: isolate;
    }

    .card-stack-container {
      isolation: isolate;
    }

    /* Prevent overflow issues */
    #portfolioGallery > div:first-child,
    #imageLightbox > div:first-child {
      pointer-events: auto;
    }

    /* Loading Spinner Animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 107, 0, 0.1);
      border-top-color: #FF6B00;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    .loading-pulse {
      animation: pulse 1.5s ease-in-out infinite;
    }

    .skeleton-loading {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.05) 25%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0.05) 75%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ========== NEW SHIMMER ANIMATIONS ========== */
@keyframes shimmer-sweep {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes shimmer-glow {
  0%, 100% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
}

@keyframes shimmer-border {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Shimmer Overlay Classes */
.shimmer-overlay {
  position: relative;
  overflow: hidden;
}

.shimmer-overlay::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 100%
  );
  transform: translateX(-100%);
  animation: shimmer-sweep 2s infinite;
  pointer-events: none;
  z-index: 1;
}

.shimmer-overlay-slow::before {
  animation: shimmer-sweep 3s infinite;
}

.shimmer-overlay-fast::before {
  animation: shimmer-sweep 1.5s infinite;
}

/* Shimmer on hover only */
.shimmer-on-hover {
  position: relative;
  overflow: hidden;
}

.shimmer-on-hover::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.15) 50%,
    transparent 100%
  );
  transform: translateX(-100%);
  pointer-events: none;
  z-index: 1;
  opacity: 0;
  transition: opacity 0.3s;
}

.shimmer-on-hover:hover::before {
  opacity: 1;
  animation: shimmer-sweep 1s ease-in-out;
}

/* Border shimmer */
.shimmer-border {
  position: relative;
  background: linear-gradient(
    90deg,
    rgba(255, 107, 0, 0.3) 0%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 107, 0, 0.3) 100%
  );
  background-size: 200% 200%;
  animation: shimmer-border 3s ease infinite;
}

/* Glow shimmer */
.shimmer-glow {
  position: relative;
}

.shimmer-glow::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(255, 107, 0, 0.2) 0%,
    transparent 70%
  );
  animation: shimmer-glow 2s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

/* Light mode shimmer adjustments */
[data-theme="light"] .shimmer-overlay::before {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(0, 0, 0, 0.05) 50%,
    transparent 100%
  );
}

[data-theme="light"] .shimmer-on-hover::before {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(0, 0, 0, 0.08) 50%,
    transparent 100%
  );
}
/* ========== END NEW SHIMMER ANIMATIONS ========== */

    /* Loading overlay */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(10, 15, 28, 0.95);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease;
    }

    .loading-overlay.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    /* Navigation button active states */
    #prevCard:active,
    #nextCard:active,
    #prevSlide:active,
    #nextSlide:active {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 0.1);
    }

    /* Prevent text selection during rapid navigation */
    .card-stack-container {
      user-select: none;
      -webkit-user-select: none;
    }


  </style>
</head>
<body class="antialiased transition-colors duration-300" style="background-color: var(--bg-primary); color: var(--text-primary);">

  <!-- Loading Overlay -->
<div id="pageLoader" class="loading-overlay shimmer-overlay">
  <div class="flex flex-col items-center gap-4 relative z-10">
    <div class="loading-spinner"></div>
    <div class="text-center">
      <p class="text-white/80 text-sm font-medium shimmer-glow">Loading Deyoungprof Creative Hub</p>
       <p class="text-white/50 text-xs mt-1">Preparing your experience...</p>
    </div>
  </div>
</div>

  <!-- Sticky Header -->
  <header id="site-header" class="fixed top-0 inset-x-0 z-50 transition-all duration-300">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-20 items-center justify-between">
        <!-- Logo -->
        <a href="#home" class="group inline-flex items-center gap-3">
          <div class="h-12 w-12 rounded-md border border-white/10 bg-white/5 grid place-items-center transition-all duration-300 group-hover:bg-white/10 group-hover:border-white/20 overflow-hidden">
            <img id="headerLogo" src="" alt="Deyoungprof Logo" class="h-full w-full object-contain p-1 hidden">
            <span id="headerLogoFallback" class="text-white font-medium tracking-tight" style="font-size:16px; letter-spacing:-0.02em;">DP</span>
          </div>
          <div class="flex flex-col leading-none">
            <span class="text-base text-white/80">Deyoungprof</span>
            <span class="text-sm text-white/50 -mt-0.5">Creative Hub</span>
          </div>
        </a>

        <!-- Nav -->
        <nav class="hidden md:flex items-center gap-6">
          <a href="#home" class="text-sm text-white/70 hover:text-white transition-colors">Home</a>
          <a href="#services" class="text-sm text-white/70 hover:text-white transition-colors">Services</a>
          <a href="#portfolio" class="text-sm text-white/70 hover:text-white transition-colors">Portfolio</a>
          <a href="#about" class="text-sm text-white/70 hover:text-white transition-colors">About</a>
          <a href="#contact" class="text-sm text-white/70 hover:text-white transition-colors">Contact</a>
        </nav>

       <!-- Header CTAs -->
        <div class="flex items-center gap-3">
          <!-- Offline Indicator -->
          <div id="offlineIndicator" class="hidden items-center gap-2 rounded-md border border-red-500/50 bg-red-500/10 px-3 py-2 text-xs text-red-400">
            <i data-lucide="wifi-off" class="h-3 w-3"></i>
            <span class="hidden sm:inline">Offline</span>
          </div>
          
          <!-- Install App Button -->
          <button id="installAppBtn" class="hidden items-center gap-2 rounded-md border border-[#FF6B00]/50 bg-[#FF6B00]/10 px-3 py-2 text-sm text-[#FF6B00] hover:bg-[#FF6B00]/20 transition-all">
            <i data-lucide="download" class="h-4 w-4"></i>
            <span class="hidden sm:inline">Install App</span>
          </button>

          <button id="themeToggle" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 transition-all" aria-label="Toggle theme">
  <i data-lucide="sun" class="h-4 w-4" id="themeIcon"></i>
</button>

<a href="#portfolio" class="hidden sm:inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20 transition-all">
  <i data-lucide="images" class="h-4 w-4"></i>
  <span>Portfolio</span>
</a>
          <a id="headerWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center justify-center rounded-md bg-[#25D366] p-2.5 text-white hover:bg-[#20bd5a] outline-none ring-0 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#25D366] transition-colors" aria-label="Chat on WhatsApp">
  <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
</a>
          <button class="md:hidden inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20" aria-label="Open Menu" id="mobileMenuBtn">
            <i data-lucide="menu" class="h-5 w-5"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="md:hidden max-h-0 overflow-hidden border-t border-white/10 bg-[#0A0F1C]/98 backdrop-blur-xl transition-all duration-300 relative z-50">
      <nav class="mx-auto max-w-7xl px-4 py-3 flex flex-col gap-2">
        <a href="#home" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Home</a>
        <a href="#services" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Services</a>
        <a href="#portfolio" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Portfolio</a>
        <a href="#about" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">About</a>
        <a href="#contact" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
<section id="home" class="relative pt-32 md:pt-36 lg:pt-40 overflow-hidden scroll-mt-24 shimmer-overlay-slow">
  <!-- Background gradient + shapes -->
  <div class="absolute inset-0 -z-10">
  <div class="absolute inset-0 bg-gradient-to-b from-[#0A0F1C] via-[#0B1224] to-[#0B0F19]"></div>
      <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full opacity-20 blur-3xl" style="background: radial-gradient(60% 60% at 50% 50%, rgba(255,107,0,0.20) 0%, rgba(255,107,0,0.05) 60%, transparent 100%);"></div>
      <div class="absolute -bottom-32 -right-16 h-96 w-96 rounded-full opacity-20 blur-3xl" style="background: radial-gradient(60% 60% at 50% 50%, rgba(255,107,0,0.18) 0%, rgba(255,107,0,0.04) 60%, transparent 100%);"></div>
      <div id="hero-bg-image" class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1626785774573-4b799315345d?q=80&w=1200&auto=format&fit=crop')] bg-center bg-cover opacity-[0.06] mix-blend-screen"></div>
    </div>

    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative">
      <div class="grid lg:grid-cols-2 gap-10 items-stretch flex-col lg:flex-row">
        <div>
          <p class="mb-4 inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs text-white/70">
  <span class="inline-flex h-1.5 w-1.5 rounded-full bg-[#FF6B00]"></span>
  Lagos, Nigeria — Creative Studio
</p>
          <h1 class="text-5xl sm:text-6xl lg:text-7xl tracking-tight font-semibold text-white leading-tight" style="font-family: 'Nexa Bold','Poppins',sans-serif;">
  Turning Ideas Into Standout Designs That Connect.
</h1>
<p class="mt-6 text-lg sm:text-xl text-white/70 max-w-2xl leading-relaxed">
            We help businesses build strong brand identities with creative, high-impact visuals.
          </p>

          <div class="mt-8 flex flex-col sm:flex-row gap-3">
            <a href="#portfolio" class="shimmer-on-hover inline-flex items-center justify-center gap-2 rounded-md bg-white text-[#0A0F1C] px-5 py-3 text-sm font-medium hover:bg-white/90 transition-colors outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">
              <i data-lucide="folder-open" class="h-5 w-5"></i>
              View Portfolio
            </a>
            <a id="heroWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="shimmer-on-hover inline-flex items-center justify-center gap-2 rounded-md bg-[#25D366] px-5 py-3 text-sm text-white hover:bg-[#20bd5a] outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#25D366]">
             <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
              Chat on WhatsApp
            </a>
          </div>

          <!-- Hero Highlights (loaded from Firebase) -->
          <div id="heroHighlights" class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-3">
            <!-- Loading skeleton -->
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
          </div>
        </div>

        <!-- Carousel -->
<div class="relative h-full flex flex-col">
  <div class="rounded-xl border border-white/10 bg-white/5 overflow-hidden shadow-[0_0_0_1px_rgba(255,255,255,0.04)_inset] flex-1 flex flex-col shimmer-overlay-slow">
            <div class="relative flex-1 flex flex-col">
  <div id="carousel" class="relative overflow-hidden flex-1">
                <div class="whitespace-nowrap transition-transform duration-500 h-full" id="carouselTrack" style="transform: translateX(0%); font-size: 0;">
                  <!-- Carousel slides will be loaded here -->
                  <div class="inline-block align-top w-full">
                    <div class="aspect-video bg-black/30 relative flex items-center justify-center">
                      <p class="text-white/60">Loading carousel...</p>
                    </div>
                  </div>
                </div>
                <!-- Controls -->
                <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 px-3 flex justify-between pointer-events-none">
                  <button id="prevSlide" class="pointer-events-auto inline-flex items-center justify-center rounded-md bg-black/30 hover:bg-black/50 border border-white/10 p-2 text-white/80 hover:text-white transition-colors">
                    <i data-lucide="chevron-left" class="h-5 w-5"></i>
                  </button>
                  <button id="nextSlide" class="pointer-events-auto inline-flex items-center justify-center rounded-md bg-black/30 hover:bg-black/50 border border-white/10 p-2 text-white/80 hover:text-white transition-colors">
                    <i data-lucide="chevron-right" class="h-5 w-5"></i>
                  </button>
                </div>
                <!-- Dots -->
                <div class="flex items-center justify-center gap-2 p-4" id="carouselDots">
                  <!-- Dots will be generated dynamically -->
                </div>
              </div>
            </div>
          </div>
          <p class="mt-3 text-xs text-white/50">Featured Portfolio Highlights</p>
        </div>
      </div>
    </div>
    <div class="h-16 sm:h-20"></div>
  </section>

  <!-- Services -->
  <section id="services" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Services</h2>
          <p class="mt-2 text-sm text-white/60 max-w-2xl">Polished design solutions with transparent pricing.</p>
        </div>
        <a id="servicesWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="hidden sm:inline-flex items-center gap-2 rounded-md bg-[#25D366] px-4 py-2 text-sm text-white hover:bg-[#20bd5a]">
          <i data-lucide="shopping-bag" class="h-4 w-4"></i>
          Order via WhatsApp
        </a>
      </div>

      <div id="servicesList" class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
        <!-- Loading skeleton -->
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
      </div>

      <div class="mt-8 flex">
       <a id="servicesWhatsApp2" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#25D366] px-5 py-3 text-sm text-white hover:bg-[#20bd5a]">
  <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
  <span>Order Your Design</span>
</a>
      </div>
    </div>
  </section>

<!-- Client Reviews -->
<section id="reviews" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white mb-4" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Client Reviews</h2>
      <p class="text-sm text-white/60">See what our clients say about working with us.</p>
    </div>

    <div id="reviewsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Loading skeleton -->
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
        <div class="flex items-center gap-3 mb-4">
          <div class="h-12 w-12 rounded-full bg-white/10"></div>
          <div class="flex-1">
            <div class="h-4 w-32 bg-white/10 rounded mb-2"></div>
            <div class="h-3 w-24 bg-white/10 rounded"></div>
          </div>
        </div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
        <div class="flex items-center gap-3 mb-4">
          <div class="h-12 w-12 rounded-full bg-white/10"></div>
          <div class="flex-1">
            <div class="h-4 w-32 bg-white/10 rounded mb-2"></div>
            <div class="h-3 w-24 bg-white/10 rounded"></div>
          </div>
        </div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
        <div class="flex items-center gap-3 mb-4">
          <div class="h-12 w-12 rounded-full bg-white/10"></div>
          <div class="flex-1">
            <div class="h-4 w-32 bg-white/10 rounded mb-2"></div>
            <div class="h-3 w-24 bg-white/10 rounded"></div>
          </div>
        </div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
    </div>
  </div>
</section>

  <!-- Portfolio -->
  <section id="portfolio" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Portfolio</h2>
          <p class="mt-2 text-sm text-white/60 max-w-2xl">Explore our work by category. Click any category to see our designs.</p>
        </div>
        <div class="hidden sm:flex items-center gap-2">
          <a href="#contact" class="inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-4 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
            <i data-lucide="mail" class="h-4 w-4"></i>
            Start a Project
          </a>
        </div>
      </div>

      <!-- Category Grid -->
      <div id="portfolioCategories" class="mt-8 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
        <!-- Loading skeleton -->
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Portfolio Gallery Modal (Card Stack) -->
  <div id="portfolioGallery" class="fixed inset-0 z-[100] hidden">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-md"></div>
    <div class="relative h-full flex flex-col z-10">
      <!-- Header -->
      <div class="flex items-center justify-between px-4 sm:px-6 py-4 border-b border-white/10 bg-[#0A0F1C]/95 backdrop-blur-xl relative z-10">
        <div class="flex items-center gap-3">
          <i id="galleryIcon" data-lucide="image" class="h-5 w-5 text-[#FF6B00]"></i>
          <h3 id="galleryTitle" class="text-lg font-semibold text-white">Portfolio</h3>
          <span id="galleryCounter" class="text-sm text-white/60">1 / 1</span>
        </div>
        <button id="closeGallery" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>

      <!-- Card Stack Gallery -->
      <div class="flex-1 flex items-center justify-center p-4 overflow-hidden relative z-10">
        <div id="galleryLoadingSpinner" class="hidden">
          <div class="flex flex-col items-center gap-3">
            <div class="loading-spinner"></div>
            <p class="text-white/60 text-sm">Loading gallery...</p>
          </div>
        </div>
        <div class="card-stack-container w-full max-w-4xl mx-auto">
          <div class="card-stack relative" id="cardStack">
            <!-- Cards will be inserted here dynamically -->
          </div>
        </div>
      </div>

      <!-- Navigation & Info -->
      <div class="px-4 sm:px-6 py-4 border-t border-white/10 bg-[#0A0F1C]/95 backdrop-blur-xl relative z-10">
        <div class="max-w-4xl mx-auto flex items-center justify-between gap-4">
          <button id="prevCard" class="inline-flex items-center gap-2 rounded-md border border-white/10 px-4 py-2 text-sm hover:bg-white/5">
            <i data-lucide="chevron-left" class="h-4 w-4"></i>
            <span class="hidden sm:inline">Previous</span>
          </button>
          
          <div class="flex-1 text-center">
            <p id="currentTitle" class="text-sm font-medium text-white"></p>
            <p id="currentPrice" class="text-xs text-white/60 mt-1"></p>
          </div>

          <button id="nextCard" class="inline-flex items-center gap-2 rounded-md border border-white/10 px-4 py-2 text-sm hover:bg-white/5">
            <span class="hidden sm:inline">Next</span>
            <i data-lucide="chevron-right" class="h-4 w-4"></i>
          </button>
        </div>
        
        <div class="max-w-4xl mx-auto mt-4 flex justify-center">
          <a id="galleryWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#25D366] px-5 py-3 text-sm text-white hover:bg-[#20bd5a]">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            Send us a DM
          </a>
        </div>
      </div>
    </div>
  </div>

<!-- Full-Size Image Lightbox -->
  <div id="imageLightbox" class="fixed inset-0 z-[110] hidden">
    <div class="absolute inset-0 bg-black/95 backdrop-blur-md"></div>
    <div class="relative h-full flex flex-col z-10">
      <!-- Header -->
      <div class="flex items-center justify-between px-4 sm:px-6 py-4 bg-black/70 backdrop-blur-xl relative z-10">
        <div class="flex items-center gap-3">
          <i data-lucide="maximize-2" class="h-5 w-5 text-[#FF6B00]"></i>
          <h3 id="lightboxTitle" class="text-base font-semibold text-white">Full View</h3>
        </div>
        <button id="closeLightbox" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/80 hover:text-white hover:bg-white/10">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>

      <!-- Image Container -->
      <div class="flex-1 flex items-center justify-center p-4 overflow-hidden relative z-10">
        <img id="lightboxImage" src="" alt="Full size view" class="max-w-full max-h-full object-contain relative z-10">
      </div>

      <!-- Footer with Info -->
      <div class="px-4 sm:px-6 py-4 bg-black/70 backdrop-blur-xl relative z-10">
        <div class="max-w-4xl mx-auto">
          <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div class="flex-1">
              <p id="lightboxItemTitle" class="text-sm font-medium text-white"></p>
              <div class="flex items-center gap-4 mt-1">
                <p id="lightboxCategory" class="text-xs text-white/60"></p>
                <p id="lightboxPrice" class="text-xs text-white/80"></p>
              </div>
            </div>
            <a id="lightboxWhatsApp" href="#" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#25D366] px-4 py-2 text-sm text-white hover:bg-[#20bd5a]">
  <i data-lucide="shopping-bag" class="h-4 w-4"></i>
  Order Now
</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Our Creative Team -->
<section id="about" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white mb-4" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Our Creative Team</h2>
      <p class="text-sm text-white/70">
        A collective of talented designers dedicated to transforming ideas into visual excellence. We combine creativity, technical expertise, and strategic thinking to deliver designs that make an impact.
      </p>
    </div>

    <!-- Team Members Grid -->
    <div id="teamMembersGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Loading skeleton -->
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
    </div>
  </div>
</section>

  <!-- Contact -->
  <section id="contact" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-10">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Contact</h2>
          <p class="mt-3 text-sm text-white/70 max-w-2xl">Share your project details and we'll respond promptly.</p>

          <form id="contactForm" class="mt-6 space-y-4">
            <div>
              <label for="name" class="block text-xs text-white/60 mb-1">Name</label>
              <input id="name" name="name" type="text" placeholder="Your name" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0">
            </div>
            <div>
              <label for="email" class="block text-xs text-white/60 mb-1">Email</label>
              <input id="email" name="email" type="email" placeholder="you@email.com" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0">
            </div>
            <div>
              <label for="message" class="block text-xs text-white/60 mb-1">Message / Project Details</label>
              <textarea id="message" name="message" rows="5" placeholder="Tell us about your project…" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0"></textarea>
            </div>
            <div class="flex flex-wrap items-center gap-3">
              <button type="submit" class="shimmer-on-hover inline-flex items-center gap-2 rounded-md bg-white text-[#0A0F1C] px-4 py-2 text-sm hover:bg-white/90 transition-all">
                <i data-lucide="send" class="h-4 w-4"></i>
                Send Message
              </button>
              <a id="contactWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm text-white" style="background-color:#25D366;">
               <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
  Start a Project on WhatsApp
              </a>
            </div>
          </form>

          <div class="mt-8 grid sm:grid-cols-2 gap-4">
            <div class="rounded-lg border border-white/10 bg-white/5 p-4">
              <div class="flex items-center gap-2">
                <i data-lucide="mail" class="h-4 w-4 text-[#FF6B00]"></i>
                <h4 class="text-sm font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Email</h4>
              </div>
              <p class="mt-1 text-sm text-white/70" id="contactEmail">stephen@bi-okoto.com</p>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-4">
              <div class="flex items-center gap-2">
                <i data-lucide="map-pin" class="h-4 w-4 text-[#FF6B00]"></i>
                <h4 class="text-sm font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Address</h4>
              </div>
              <p class="mt-1 text-sm text-white/70" id="contactAddress">4, Mbere Close, Morogbo Bus Stop, Agbara, Badagry, Lagos</p>
            </div>
          </div>
        </div>

        <!-- Map / Visual -->
        <div>
          <div class="rounded-xl border border-white/10 bg-white/5 overflow-hidden">
            <div class="aspect-[4/3] relative">
              <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop" alt="Lagos skyline abstract" class="absolute inset-0 h-full w-full object-cover">
              <div class="absolute inset-0 bg-gradient-to-t from-[#0A0F1C]/70 via-transparent to-transparent"></div>
              <div class="absolute bottom-0 left-0 right-0 p-4 flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm text-white/80">
                  <i data-lucide="map" class="h-4 w-4 text-[#FF6B00]"></i>
                  Agbara, Badagry
                </div>
                <a id="contactMapWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#25D366] px-3 py-2 text-xs text-white hover:bg-[#20bd5a]">
                  <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                  WhatsApp Now
                </a>
              </div>
            </div>
          </div>
          <p class="mt-3 text-xs text-white/50">Serving clients across Lagos, Nigeria and beyond.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Review Image Lightbox -->
  <div id="reviewImageLightbox" class="fixed inset-0 z-[110] hidden">
    <div class="absolute inset-0 bg-black/95 backdrop-blur-md" onclick="closeReviewImageLightbox()"></div>
    <div class="relative h-full flex flex-col z-10">
      <div class="flex items-center justify-between px-4 sm:px-6 py-4 bg-black/70 backdrop-blur-xl">
        <div class="flex items-center gap-3">
          <i data-lucide="shield-check" class="h-5 w-5 text-[#FF6B00]"></i>
          <h3 id="reviewImageTitle" class="text-base font-semibold text-white">Client Evidence</h3>
        </div>
        <button onclick="closeReviewImageLightbox()" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/80 hover:text-white hover:bg-white/10">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>
      <div class="flex-1 flex items-center justify-center p-4 overflow-hidden">
        <img id="reviewImageSrc" src="" alt="Review evidence" class="max-w-full max-h-full object-contain">
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="border-t border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-md border border-white/10 bg-white/5 grid place-items-center overflow-hidden">
            <img id="footerLogo" src="" alt="DP Logo" class="h-full w-full object-contain p-1 hidden">
            <span id="footerLogoFallback" class="text-white font-medium tracking-tight" style="font-size:14px; letter-spacing:-0.02em;">DP</span>
          </div>
          <span class="text-sm text-white/70">Deyoungprof Creative Hub</span>
        </div>
        <div class="flex items-center gap-3">
          <a id="footerWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#25D366] px-4 py-2 text-sm text-white hover:bg-[#20bd5a]">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            WhatsApp
          </a>
          <a id="footerInstagram" href="#" class="inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-4 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
            <i data-lucide="instagram" class="h-4 w-4"></i>
            Instagram
          </a>
        </div>
      </div>
      <div class="mt-6 flex items-center justify-between text-xs text-white/50">
        <p>© 2025 Deyoungprof Creative Hub. All rights reserved.</p>
        <p>Built for impact — Lagos, Nigeria.</p>
      </div>
    </div>
  </footer>

  <!-- Firebase & App Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getFirestore, collection, getDocs, doc, getDoc, query, orderBy, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCVhKuw3k3gmAlJMjMzXtRlc9FAcT_-ks8",
      authDomain: "deyoungprof-creative-hub.firebaseapp.com",
      projectId: "deyoungprof-creative-hub",
      storageBucket: "deyoungprof-creative-hub.firebasestorage.app",
      messagingSenderId: "753963504321",
      appId: "1:753963504321:web:ab4f16cace407e2c5b3a40"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Global state
    let carouselSlides = [];
    let carouselIndex = 0;
    let portfolioData = {};
    let currentGallery = [];
    let currentGalleryIndex = 0;
    let siteSettings = {};

// Cache management constants
const CACHE_VERSION = '1.0.0';
const CACHE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days in milliseconds
const CACHE_KEYS = {
  CAROUSEL: 'deyoungprof_cache_carousel',
  PORTFOLIO: 'deyoungprof_cache_portfolio',
  SERVICES: 'deyoungprof_cache_services',
  SETTINGS: 'deyoungprof_cache_settings',
  HIGHLIGHTS: 'deyoungprof_cache_highlights',
  REVIEWS: 'deyoungprof_cache_reviews',
  TEAM: 'deyoungprof_cache_team',
  TIMESTAMP: 'deyoungprof_cache_timestamp'
};

// Fallback state tracker
let usingFallback = false;
let firebaseAvailable = true;
let fallbackDataLoaded = false;
let autoRetryInterval = null;

// ========== CACHE & FALLBACK FUNCTIONS ==========

// Save data to localStorage cache
function cacheData(key, data) {
  try {
    localStorage.setItem(key, JSON.stringify(data));
    localStorage.setItem(CACHE_KEYS.TIMESTAMP, Date.now().toString());
    console.log(`✅ Cached: ${key}`);
  } catch (error) {
    console.warn('Cache save failed:', error);
  }
}

// Get data from localStorage cache
function getCachedData(key) {
  try {
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : null;
  } catch (error) {
    console.warn('Cache read failed:', error);
    return null;
  }
}

// Check if cache is still valid (within 7 days)
function isCacheValid() {
  try {
    const timestamp = localStorage.getItem(CACHE_KEYS.TIMESTAMP);
    if (!timestamp) return false;
    
    const age = Date.now() - parseInt(timestamp);
    const isValid = age < CACHE_DURATION;
    
    if (!isValid) {
      console.log('⚠️ Cache expired (older than 7 days)');
    }
    
    return isValid;
  } catch (error) {
    return false;
  }
}

// Clear all cache
function clearCache() {
  Object.values(CACHE_KEYS).forEach(key => {
    localStorage.removeItem(key);
  });
  console.log('🗑️ Cache cleared');
}

// Load fallback data from fallback-data.json
async function loadFallbackData() {
  if (fallbackDataLoaded) return true;
  
  try {
    console.log('📥 Loading fallback-data.json...');
    const response = await fetch('./fallback-data.json');
    
    if (!response.ok) {
      throw new Error('Fallback file not found');
    }
    
    const fallbackData = await response.json();
    console.log('✅ Fallback data loaded:', fallbackData);
    
    // Store in variables
    carouselSlides = fallbackData.carouselSlides || [];
    portfolioData = {};
    
    // Build portfolio data structure
    (fallbackData.portfolioItems || []).forEach(item => {
      if (!portfolioData[item.category]) {
        portfolioData[item.category] = {
          display: item.categoryDisplay,
          items: []
        };
      }
      portfolioData[item.category].items.push(item);
    });
    
    siteSettings = fallbackData.siteSettings || {};
    
    // Cache the fallback data
    cacheData(CACHE_KEYS.CAROUSEL, carouselSlides);
    cacheData(CACHE_KEYS.PORTFOLIO, portfolioData);
    cacheData(CACHE_KEYS.SERVICES, fallbackData.services || []);
    cacheData(CACHE_KEYS.SETTINGS, siteSettings);
    cacheData(CACHE_KEYS.HIGHLIGHTS, fallbackData.heroHighlights || []);
    cacheData(CACHE_KEYS.REVIEWS, fallbackData.reviews || []);
    cacheData(CACHE_KEYS.TEAM, fallbackData.teamMembers || []);
    
    fallbackDataLoaded = true;
    return true;
  } catch (error) {
    console.error('❌ Failed to load fallback data:', error);
    return false;
  }
}

// Show fallback indicator to user
function showFallbackIndicator() {
  const indicator = document.createElement('div');
  indicator.id = 'fallbackIndicator';
  indicator.className = 'fixed top-20 right-4 z-[90] rounded-lg border border-yellow-500/50 bg-yellow-500/10 px-4 py-3 shadow-lg backdrop-blur-sm';
  indicator.innerHTML = `
    <div class="flex items-center gap-3">
      <i data-lucide="database" class="h-5 w-5 text-yellow-400 flex-shrink-0"></i>
      <div class="text-sm">
        <p class="text-yellow-400 font-medium">Using Cached Data</p>
        <p class="text-white/60 text-xs mt-0.5">Firebase temporarily unavailable</p>
      </div>
      <button onclick="document.getElementById('fallbackIndicator').remove()" class="text-white/40 hover:text-white">
        <i data-lucide="x" class="h-4 w-4"></i>
      </button>
    </div>
  `;
  document.body.appendChild(indicator);
  if (window.lucide) window.lucide.createIcons();
  
  // Auto-hide after 10 seconds
  setTimeout(() => {
    indicator?.remove();
  }, 10000);
}

// Start auto-retry to reconnect to Firebase
function startAutoRetry() {
  if (autoRetryInterval) return; // Already running
  
  console.log('🔄 Starting auto-retry (every 5 minutes)...');
  
  autoRetryInterval = setInterval(async () => {
    console.log('🔄 Attempting to reconnect to Firebase...');
    
    try {
      // Try a simple Firebase operation
      const testDoc = await getDoc(doc(db, 'siteSettings', 'main'));
      
      if (testDoc.exists()) {
        console.log('✅ Firebase reconnected! Reloading data...');
        clearInterval(autoRetryInterval);
        autoRetryInterval = null;
        firebaseAvailable = true;
        usingFallback = false;
        
        // Remove fallback indicator
        document.getElementById('fallbackIndicator')?.remove();
        
        // Reload fresh data
        await loadSiteData();
        
        showToast('Reconnected to Firebase! Data refreshed.', 'success');
      }
    } catch (error) {
      console.log('⚠️ Still offline, will retry...');
    }
  }, 5 * 60 * 1000); // Every 5 minutes
}

    // Initialize
    document.addEventListener('DOMContentLoaded', async () => {
      if (window.lucide) window.lucide.createIcons();
      // Initialize theme
initializeTheme();

// Show page loader
      const pageLoader = document.getElementById('pageLoader');
      
      try {
        await loadSiteData();
        
        // Initialize all interactive features
        initializeCarousel();
        initializeMobileMenu();
        initializeHeader();
        initializeContactForm();
        
        // Setup gallery navigation (do this after portfolio loads)
        setupGalleryNavigation();
        
        console.log('✅ All features initialized');
        
        // Hide loader after everything loads
        setTimeout(() => {
          pageLoader.classList.add('fade-out');
          setTimeout(() => {
            pageLoader.style.display = 'none';
          }, 300);
        }, 500); // Small delay to ensure smooth transition
      } catch (error) {
        console.error('Initialization error:', error);
        // Hide loader even on error
        pageLoader.classList.add('fade-out');
        setTimeout(() => {
          pageLoader.style.display = 'none';
        }, 300);
      }
    });

    async function loadSiteData() {
  try {
    // Try Firebase first with timeout
    const timeoutPromise = new Promise((_, reject) => 
      setTimeout(() => reject(new Error('Firebase timeout')), 10000)
    );
    
    const loadPromise = Promise.all([
      loadSettings(),
      loadCarousel(),
      loadServices(),
      loadReviews(),
      loadPortfolio(),
      loadHeroHighlights(),
      loadTeamMembers()
    ]);
    
    await Promise.race([loadPromise, timeoutPromise]);
    
    firebaseAvailable = true;
    console.log('✅ All site data loaded successfully from Firebase');
    
  } catch (error) {
    console.error('❌ Firebase load failed:', error);
    console.error('Error details:', error.message); // ✅ NEW: More detailed error logging
    firebaseAvailable = false;
    
    // Try cache first
    if (isCacheValid()) {
      console.log('📦 Using cached data...');
      await loadFromCache();
      usingFallback = true;
      showFallbackIndicator();
      startAutoRetry();
      return;
    }
    
    // Try fallback-data.json
    console.log('📥 Attempting to load fallback-data.json...');
    const fallbackLoaded = await loadFallbackData();
    
    if (fallbackLoaded) {
      console.log('✅ Using fallback data');
      usingFallback = true;
      
      // Render everything with fallback data
      await Promise.all([
        renderSettingsFromFallback(),
        renderCarousel(),
        renderServicesFromFallback(),
        renderReviewsFromFallback(),
        renderPortfolioCategories(),
        renderHeroHighlightsFromFallback(),
        renderTeamMembersFromFallback()
      ]);
      
      showFallbackIndicator();
      startAutoRetry();
    } else {
      // Ultimate failure - show error
      console.error('❌ All fallback methods failed');
      showToast('Unable to load content. Please check your connection.', 'error');
      
      const sections = ['servicesList', 'portfolioCategories', 'heroHighlights', 'reviewsList', 'teamMembersGrid'];
      sections.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerHTML = '<p class="text-white/60">Unable to load content. Please refresh the page.</p>';
      });
    }
  }
}

// Load data from localStorage cache
async function loadFromCache() {
  console.log('📦 Loading from cache...');
  
  carouselSlides = getCachedData(CACHE_KEYS.CAROUSEL) || [];
  portfolioData = getCachedData(CACHE_KEYS.PORTFOLIO) || {};
  siteSettings = getCachedData(CACHE_KEYS.SETTINGS) || {};
  
  console.log(`📦 Cache loaded: ${carouselSlides.length} carousel slides, ${Object.keys(portfolioData).length} portfolio categories`);
  
  // Render from cache
  await Promise.all([
    renderSettingsFromCache(),
    renderCarousel(),
    renderServicesFromCache(),
    renderReviewsFromCache(),
    renderPortfolioCategories(),
    renderHeroHighlightsFromCache(),
    renderTeamMembersFromCache()
  ]);
  
  console.log('✅ All content rendered from cache successfully');
}

// Render functions for fallback/cached data
async function renderSettingsFromFallback() {
  if (!siteSettings.contact) return;
  
  // Update WhatsApp links
  const phone = siteSettings.contact.phone || '2348147732687';
  const whatsappUrl = `https://wa.me/${phone}`;
  document.querySelectorAll('#headerWhatsApp, #heroWhatsApp, #servicesWhatsApp, #servicesWhatsApp2, #contactWhatsApp, #contactMapWhatsApp, #footerWhatsApp, #galleryWhatsApp').forEach(el => {
    if (el) el.href = whatsappUrl;
  });

  // Update contact info
  const emailEl = document.getElementById('contactEmail');
  const addressEl = document.getElementById('contactAddress');
  if (emailEl) emailEl.textContent = siteSettings.contact.email || 'stephen@bi-okoto.com';
  if (addressEl) addressEl.textContent = siteSettings.contact.address || '4, Mbere Close, Morogbo Bus Stop, Agbara, Badagry, Lagos';

  // Update logo if available
  if (siteSettings.logos?.main) {
    const headerLogo = document.getElementById('headerLogo');
    const footerLogo = document.getElementById('footerLogo');
    if (headerLogo) {
      headerLogo.src = siteSettings.logos.main;
      headerLogo.classList.remove('hidden');
    }
    if (footerLogo) {
      footerLogo.src = siteSettings.logos.main;
      footerLogo.classList.remove('hidden');
    }
  }
}

async function renderSettingsFromCache() {
  await renderSettingsFromFallback();
}

async function renderServicesFromFallback() {
  const services = getCachedData(CACHE_KEYS.SERVICES) || [];
  const listEl = document.getElementById('servicesList');
  if (!listEl) return;
  
  if (services.length === 0) {
    listEl.innerHTML = '<p class="text-white/60 col-span-full">No services available.</p>';
    return;
  }

  listEl.innerHTML = '';
  services.forEach(data => {
    const article = document.createElement('article');
    article.className = 'shimmer-on-hover group rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300';
    article.innerHTML = `
      <div class="grid sm:grid-cols-[120px_1fr] gap-4 p-5">
        <div class="aspect-square rounded-lg overflow-hidden bg-black/20 border border-white/10">
          <img src="${data.thumbnailUrl || ''}" alt="${data.name}" class="h-full w-full object-cover" loading="lazy" onerror="this.style.display='none'">
        </div>
        <div class="flex flex-col">
          <div class="flex items-start justify-between gap-3 mb-2">
            <div class="flex items-center gap-2">
              <i data-lucide="${data.icon}" class="h-5 w-5 text-[#FF6B00] flex-shrink-0"></i>
              <h3 class="text-base font-semibold text-white group-hover:text-[#FF6B00] transition-colors">${data.name}</h3>
            </div>
            <span class="text-sm text-white/80 font-medium whitespace-nowrap">${data.price}</span>
          </div>
          <p class="text-sm text-white/60 mb-4 flex-1">${data.description}</p>
          <div class="flex flex-wrap gap-2">
            <a href="https://wa.me/${siteSettings.contact?.phone || '2348147732687'}?text=${encodeURIComponent('Hello, I\'m interested in: ' + data.name + ' (' + data.price + ')')}" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-3 py-2 text-xs text-white hover:bg-[#ff7b1b] transition-colors">
              <i data-lucide="message-circle" class="h-3 w-3"></i>
              Order Now
            </a>
          </div>
        </div>
      </div>
    `;
    listEl.appendChild(article);
  });

  if (window.lucide) window.lucide.createIcons();
}

async function renderServicesFromCache() {
  await renderServicesFromFallback();
}

async function renderReviewsFromFallback() {
  const reviews = getCachedData(CACHE_KEYS.REVIEWS) || [];
  const container = document.getElementById('reviewsList');
  if (!container) return;
  
  if (reviews.length === 0) {
    container.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-white/40 text-sm">No reviews yet.</p></div>';
    return;
  }

  container.innerHTML = '';
  reviews.forEach(data => {
    const card = document.createElement('div');
    card.className = 'shimmer-on-hover rounded-xl border border-white/10 bg-white/5 p-6 hover:bg-white/10 hover:border-white/20 transition-all duration-300';
    
    const stars = Array(5).fill(0).map((_, i) => 
      `<i data-lucide="star" class="h-4 w-4 ${i < data.rating ? 'fill-[#FF6B00] text-[#FF6B00]' : 'text-white/20'}"></i>`
    ).join('');
    
    card.innerHTML = `
      <div class="flex items-center gap-3 mb-4">
        <div class="h-12 w-12 rounded-full bg-gradient-to-br from-[#FF6B00]/20 to-white/5 flex items-center justify-center text-white font-semibold">
          ${data.clientName.charAt(0)}
        </div>
        <div class="flex-1">
          <h3 class="text-base font-semibold text-white">${data.clientName}</h3>
          <p class="text-xs text-white/60">${data.projectType || 'Client'}</p>
        </div>
      </div>
      <div class="flex items-center gap-1 mb-3">${stars}</div>
      <p class="text-sm text-white/70 leading-relaxed mb-3">${data.review}</p>
      ${data.imageUrl ? `
        <div class="mt-3 rounded-lg border border-white/10 overflow-hidden">
          <img src="${data.imageUrl}" alt="Review evidence" class="w-full h-32 object-cover" loading="lazy" onerror="this.parentElement.style.display='none'">
        </div>
      ` : ''}
    `;
    container.appendChild(card);
  });

  if (window.lucide) window.lucide.createIcons();
}

async function renderReviewsFromCache() {
  await renderReviewsFromFallback();
}

async function renderHeroHighlightsFromFallback() {
  const highlights = getCachedData(CACHE_KEYS.HIGHLIGHTS) || [];
  const container = document.getElementById('heroHighlights');
  if (!container) return;
  
  if (highlights.length === 0) {
    container.innerHTML = '<div class="col-span-full text-center py-8"><p class="text-white/40 text-sm">No highlights configured yet.</p></div>';
    return;
  }

  container.innerHTML = '';
  highlights.forEach(data => {
    const card = document.createElement('div');
    card.className = 'rounded-lg border border-white/10 bg-white/5 p-5 hover:bg-white/10 hover:border-white/20 transition-colors';
    card.innerHTML = `
      <div class="flex items-center gap-3">
        <i data-lucide="${data.icon}" class="h-6 w-6 text-[#FF6B00]"></i>
        <h3 class="text-base font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.title}</h3>
      </div>
      <p class="mt-2 text-sm text-white/60">${data.description}</p>
    `;
    container.appendChild(card);
  });

  if (window.lucide) window.lucide.createIcons();
}

async function renderHeroHighlightsFromCache() {
  await renderHeroHighlightsFromFallback();
}

async function renderTeamMembersFromFallback() {
  const team = getCachedData(CACHE_KEYS.TEAM) || [];
  const container = document.getElementById('teamMembersGrid');
  if (!container) return;
  
  if (team.length === 0) {
    container.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-white/40 text-sm">Our team section is coming soon.</p></div>';
    return;
  }

  container.innerHTML = '';
  team.forEach(data => {
    const card = document.createElement('div');
    
    if (data.isCEO) {
      card.className = 'rounded-xl border-2 border-[#FF6B00]/30 bg-gradient-to-br from-[#FF6B00]/5 to-white/5 overflow-hidden lg:col-span-2 hover:border-[#FF6B00]/50 transition-all duration-300';
      card.innerHTML = `
        <div class="grid lg:grid-cols-2 gap-0">
          <div class="aspect-[4/3] lg:aspect-auto bg-black/20 relative">
            <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover" onerror="this.style.display='none'">
            <div class="absolute top-3 right-3 bg-[#FF6B00] text-white text-xs font-semibold px-3 py-1.5 rounded-full shadow-lg">
              <i data-lucide="crown" class="h-3 w-3 inline mr-1"></i>Founder & CEO
            </div>
          </div>
          <div class="p-6 lg:p-8 flex flex-col justify-center">
            <h3 class="text-xl font-semibold text-white mb-2">${data.name}</h3>
            <p class="text-[#FF6B00] text-sm font-medium mb-4">${data.role}</p>
            <p class="text-sm text-white/70 leading-relaxed">${data.bio}</p>
          </div>
        </div>
      `;
    } else {
      card.className = 'rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300';
      card.innerHTML = `
        <div class="aspect-[4/3] bg-black/20 relative overflow-hidden">
          <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover" onerror="this.style.display='none'">
        </div>
        <div class="p-5">
          <h3 class="text-base font-semibold text-white mb-1">${data.name}</h3>
          <p class="text-[#FF6B00] text-sm font-medium mb-3">${data.role}</p>
          <p class="text-xs text-white/60 leading-relaxed">${data.bio}</p>
        </div>
      `;
    }
    container.appendChild(card);
  });

  if (window.lucide) window.lucide.createIcons();
}

async function renderTeamMembersFromCache() {
  await renderTeamMembersFromFallback();
}

    // Load settings
    async function loadSettings() {
      try {
        const settingsDoc = await getDoc(doc(db, 'siteSettings', 'main'));
        if (settingsDoc.exists()) {
          siteSettings = settingsDoc.data();
          
          // Update WhatsApp links
          const phone = siteSettings.contact?.phone || '2348147732687';
          const whatsappUrl = `https://wa.me/${phone}`;
          document.querySelectorAll('#headerWhatsApp, #heroWhatsApp, #servicesWhatsApp, #servicesWhatsApp2, #contactWhatsApp, #contactMapWhatsApp, #footerWhatsApp, #galleryWhatsApp').forEach(el => {
            el.href = whatsappUrl;
          });

          // Update contact info
document.getElementById('contactEmail').textContent = siteSettings.contact?.email || 'stephen@bi-okoto.com';
document.getElementById('contactAddress').textContent = siteSettings.contact?.address || '4, Mbere Close, Morogbo Bus Stop, Agbara, Badagry, Lagos';

// Update Instagram
const instagramUrl = siteSettings.social?.instagram || '#';
document.getElementById('footerInstagram').href = instagramUrl;

          // Update logos
if (siteSettings.logos?.main) {
  const headerLogo = document.getElementById('headerLogo');
  const footerLogo = document.getElementById('footerLogo');
  
  if (headerLogo) {
    headerLogo.src = siteSettings.logos.main;
    headerLogo.classList.remove('hidden');
    headerLogo.onerror = function() {
      this.classList.add('hidden');
      const fallback = document.getElementById('headerLogoFallback');
      if (fallback) fallback.classList.remove('hidden');
    };
    const fallback = document.getElementById('headerLogoFallback');
    if (fallback) fallback.classList.add('hidden');
  }
  
  if (footerLogo) {
    footerLogo.src = siteSettings.logos.main;
    footerLogo.classList.remove('hidden');
    footerLogo.onerror = function() {
      this.classList.add('hidden');
      const fallback = document.getElementById('footerLogoFallback');
      if (fallback) fallback.classList.remove('hidden');
    };
    const fallback = document.getElementById('footerLogoFallback');
    if (fallback) fallback.classList.add('hidden');
  }
}

// Update location image
if (siteSettings.location?.imageUrl) {
  const locationImg = document.querySelector('#contact .aspect-\\[4\\/3\\] img');
  if (locationImg) {
    locationImg.src = siteSettings.location.imageUrl;
    locationImg.alt = siteSettings.contact?.locationText || 'Location image';
  }
}

// Update location text
if (siteSettings.contact?.locationText) {
  // Target the location text more specifically
  const locationTextElements = document.querySelectorAll('#contact .aspect-\\[4\\/3\\] .text-white\\/80');
  locationTextElements.forEach(el => {
    // Only update if it contains map icon (the location display element)
    if (el.querySelector('[data-lucide="map"]')) {
      // Clear existing text and rebuild
      const icon = el.querySelector('i');
      el.textContent = '';
      if (icon) el.appendChild(icon);
      el.appendChild(document.createTextNode(' ' + siteSettings.contact.locationText));
    }
  });
}
        }
        // Cache settings
        cacheData(CACHE_KEYS.SETTINGS, siteSettings);
      } catch (error) {
        console.error('Settings error:', error);
      }
    }

    // Load hero highlights
async function loadHeroHighlights() {
  try {
    const highlightsArray = []; // ✅ FIXED: Declare array at the start
    const q = query(collection(db, 'heroHighlights'), where('active', '==', true), orderBy('order'));
    const snapshot = await getDocs(q);
    
    const container = document.getElementById('heroHighlights');
    
    if (snapshot.empty) {
      console.log('⚠️ No highlights found in Firebase');
      container.innerHTML = `
        <div class="col-span-full text-center py-8">
          <p class="text-white/40 text-sm">No highlights configured yet.</p>
        </div>
      `;
      return;
    }

    container.innerHTML = '';
    snapshot.forEach(doc => {
      const data = doc.data();
      highlightsArray.push(data); // ✅ FIXED: Push to array inside loop
      
      const card = document.createElement('div');
      card.className = 'rounded-lg border border-white/10 bg-white/5 p-5 hover:bg-white/10 hover:border-white/20 transition-colors';
      card.innerHTML = `
        <div class="flex items-center gap-3">
          <i data-lucide="${data.icon}" class="h-6 w-6 text-[#FF6B00]"></i>
          <h3 class="text-base font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.title}</h3>
        </div>
        <p class="mt-2 text-sm text-white/60">${data.description}</p>
      `;
      container.appendChild(card);
    });

    // Cache highlights
    cacheData(CACHE_KEYS.HIGHLIGHTS, highlightsArray);
    console.log(`✅ Loaded ${highlightsArray.length} highlights from Firebase`);
    
    if (window.lucide) window.lucide.createIcons();
  } catch (error) {
    console.error('❌ Hero highlights error:', error);
    const container = document.getElementById('heroHighlights');
    if (container) {
      container.innerHTML = `
        <div class="col-span-full text-center py-8">
          <p class="text-white/40 text-sm">Unable to load highlights. Please refresh.</p>
        </div>
      `;
    }
  }
}


// Load team members
async function loadTeamMembers() {
  try {
    // Load team members
    const q = query(collection(db, 'teamMembers'), where('active', '==', true), orderBy('order'));
    const snapshot = await getDocs(q);
    
    // Load settings to check if "Join Our Team" card should show
    const settingsDoc = await getDoc(doc(db, 'siteSettings', 'main'));
    const showJoinTeam = settingsDoc.exists() ? settingsDoc.data().teamSettings?.showJoinTeam : false;
    
    const container = document.getElementById('teamMembersGrid');
    
    if (snapshot.empty && !showJoinTeam) {
      container.innerHTML = `
        <div class="col-span-full text-center py-12">
          <p class="text-white/40 text-sm">Our team section is coming soon.</p>
        </div>
      `;
      return;
    }

    container.innerHTML = '';
    
    // Render team members
    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const card = document.createElement('div');
      
      // CEO gets special styling - spans 2 columns on desktop
      if (data.isCEO) {
        card.className = 'rounded-xl border-2 border-[#FF6B00]/30 bg-gradient-to-br from-[#FF6B00]/5 to-white/5 overflow-hidden lg:col-span-2 hover:border-[#FF6B00]/50 transition-all duration-300';
        card.innerHTML = `
          <div class="grid lg:grid-cols-2 gap-0">
            <div class="aspect-[4/3] lg:aspect-auto bg-black/20 relative">
              <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover">
              <div class="absolute top-3 right-3 bg-[#FF6B00] text-white text-xs font-semibold px-3 py-1.5 rounded-full shadow-lg">
                <i data-lucide="crown" class="h-3 w-3 inline mr-1"></i>
                Founder & CEO
              </div>
            </div>
            <div class="p-6 lg:p-8 flex flex-col justify-center">
              <h3 class="text-xl font-semibold text-white mb-2" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.name}</h3>
              <p class="text-[#FF6B00] text-sm font-medium mb-4">${data.role}</p>
              <p class="text-sm text-white/70 leading-relaxed">${data.bio}</p>
              <div class="mt-6 flex items-center gap-2 text-sm text-white/60">
                <i data-lucide="map-pin" class="h-4 w-4 text-[#FF6B00]"></i>
                <span>Lagos, Nigeria</span>
              </div>
            </div>
          </div>
        `;
      } else {
        // Regular team member card
        card.className = 'shimmer-on-hover rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300 group';
        card.innerHTML = `
          <div class="aspect-[4/3] bg-black/20 relative overflow-hidden">
            <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105">
          </div>
          <div class="p-5">
            <h3 class="text-base font-semibold text-white mb-1" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.name}</h3>
            <p class="text-[#FF6B00] text-sm font-medium mb-3">${data.role}</p>
            <p class="text-xs text-white/60 leading-relaxed">${data.bio}</p>
          </div>
        `;
      }
      
      container.appendChild(card);
    });
    
    // Add "Join Our Team" card if enabled
    if (showJoinTeam) {
      const joinCard = document.createElement('div');
      joinCard.className = 'rounded-xl border-2 border-dashed border-white/20 bg-white/5 p-8 flex flex-col items-center justify-center text-center hover:border-[#FF6B00]/50 hover:bg-[#FF6B00]/5 transition-all duration-300 group cursor-pointer';
      joinCard.innerHTML = `
        <div class="h-16 w-16 rounded-full bg-[#FF6B00]/10 flex items-center justify-center mb-4 group-hover:bg-[#FF6B00]/20 transition-colors">
          <i data-lucide="user-plus" class="h-8 w-8 text-[#FF6B00]"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Join Our Team</h3>
        <p class="text-sm text-white/60 mb-4 max-w-xs">
          We're always looking for talented designers to join our creative family.
        </p>
        <a href="#contact" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-4 py-2 text-sm text-white hover:bg-[#ff7b1b] transition-colors">
          <span>Get in Touch</span>
          <i data-lucide="arrow-right" class="h-4 w-4"></i>
        </a>
      `;
      container.appendChild(joinCard);
    }
    
  if (window.lucide) window.lucide.createIcons();
    
    // Cache team members
    const teamArray = [];
    snapshot.forEach(doc => teamArray.push(doc.data()));
    cacheData(CACHE_KEYS.TEAM, teamArray);
    
  } catch (error) {
    console.error('Team members load error:', error);
    const container = document.getElementById('teamMembersGrid');
    container.innerHTML = `
      <div class="col-span-full text-center py-12">
        <p class="text-white/40 text-sm">Unable to load team members.</p>
      </div>
    `;
  }
}

    // Load carousel
    async function loadCarousel() {
      try {
        const q = query(collection(db, 'carouselSlides'), where('active', '==', true), orderBy('order'));
        const snapshot = await getDocs(q);
        
        carouselSlides = [];
        snapshot.forEach(doc => {
          carouselSlides.push(doc.data());
        });

        if (carouselSlides.length > 0) {
          renderCarousel();
        }
        
        // Cache carousel
        cacheData(CACHE_KEYS.CAROUSEL, carouselSlides);
      } catch (error) {
        console.error('Carousel error:', error);
      }
    }

   function renderCarousel() {
      const track = document.getElementById('carouselTrack');
      track.innerHTML = carouselSlides.map((slide, index) => `
        <div class="inline-block align-top w-full h-full">
          <div class="h-full relative cursor-pointer group flex flex-col carousel-slide-clickable" data-carousel-index="${index}" style="background: var(--bg-primary);">
            <div class="flex-1 relative overflow-hidden">
              <img src="${slide.imageUrl}" alt="${slide.title}" loading="lazy" class="w-full h-full object-cover">
            </div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#0A0F1C]/80 via-transparent to-transparent pointer-events-none"></div>
            <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
              <div class="rounded-full bg-white/20 backdrop-blur-sm p-4 border border-white/30">
                <i data-lucide="maximize-2" class="h-6 w-6 text-white"></i>
              </div>
            </div>
            <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent">
              <span class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">
                <i data-lucide="sparkles" class="h-4 w-4 text-[#FF6B00]"></i>
                ${slide.title}
              </span>
              <p class="mt-2 text-sm text-white/90">${slide.description}</p>
            </div>
          </div>
        </div>
      `).join('');

      // Generate dots
      const dots = document.getElementById('carouselDots');
      dots.innerHTML = carouselSlides.map((_, i) => `
        <button class="h-1.5 w-6 rounded-full ${i === 0 ? 'bg-white/40' : 'bg-white/20'} hover:bg-white/70 transition-colors" data-dot="${i}" aria-label="Slide ${i + 1}"></button>
      `).join('');

      if (window.lucide) window.lucide.createIcons();
    }

    function initializeCarousel() {
      const track = document.getElementById('carouselTrack');
      const prevBtn = document.getElementById('prevSlide');
      const nextBtn = document.getElementById('nextSlide');
      
      if (!track || carouselSlides.length === 0) {
        console.log('Carousel not ready - skipping initialization');
        return;
      }

      function goToSlide(index) {
        carouselIndex = (index + carouselSlides.length) % carouselSlides.length;
        track.style.transform = `translateX(-${carouselIndex * 100}%)`;
        
        document.querySelectorAll('[data-dot]').forEach((dot, i) => {
          dot.classList.toggle('bg-white/40', i === carouselIndex);
          dot.classList.toggle('bg-white/20', i !== carouselIndex);
        });
      }

      prevBtn?.addEventListener('click', () => goToSlide(carouselIndex - 1));
      nextBtn?.addEventListener('click', () => goToSlide(carouselIndex + 1));
      
      document.querySelectorAll('[data-dot]').forEach(dot => {
        dot.addEventListener('click', () => goToSlide(parseInt(dot.dataset.dot)));
      });

      // Add click listeners to carousel slides for lightbox
      setTimeout(() => {
        document.querySelectorAll('.carousel-slide-clickable').forEach(slideEl => {
          slideEl.addEventListener('click', (e) => {
            // Don't open lightbox if clicking navigation buttons
            if (e.target.closest('#prevSlide') || e.target.closest('#nextSlide') || e.target.closest('[data-dot]')) {
              return;
            }
            
            const slideIndex = parseInt(slideEl.dataset.carouselIndex);
            const slide = carouselSlides[slideIndex];
            if (slide) {
              openImageLightbox(
                slide.imageUrl,
                slide.title,
                'Carousel Slide',
                slide.description || '',
                slide
              );
            }
          });
        });
        console.log('✅ Carousel click listeners attached');
      }, 100);

      // Auto-rotate
      setInterval(() => goToSlide(carouselIndex + 1), 6000);

      // Touch swipe support
      let touchStartX = 0;
      let touchEndX = 0;
      
      track.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });
      
      track.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        const diff = touchStartX - touchEndX;
        if (Math.abs(diff) > 50) {
          if (diff > 0) goToSlide(carouselIndex + 1);
          else goToSlide(carouselIndex - 1);
        }
      }, { passive: true });
    }

    // Load services
    // Load services
async function loadServices() {
  try {
    const servicesArray = [];
    const q = query(collection(db, 'services'), where('active', '==', true), orderBy('order'));
    const snapshot = await getDocs(q);
    
    const listEl = document.getElementById('servicesList');
    if (snapshot.empty) {
      listEl.innerHTML = '<p class="text-white/60 col-span-full">No services available yet.</p>';
      return;
    }

    listEl.innerHTML = '';
    snapshot.forEach(doc => {
      const data = doc.data();
      servicesArray.push(data); // ✅ FIXED: Moved here, inside the loop where 'data' is defined
      
      const article = document.createElement('article');
      article.className = 'group rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300';
      article.innerHTML = `
        <div class="grid sm:grid-cols-[120px_1fr] gap-4 p-5">
          <div class="aspect-square rounded-lg overflow-hidden bg-black/20 border border-white/10">
            <img src="${data.thumbnailUrl || ''}" alt="${data.name}" class="h-full w-full object-cover" loading="lazy">
          </div>
          <div class="flex flex-col">
            <div class="flex items-start justify-between gap-3 mb-2">
              <div class="flex items-center gap-2">
                <i data-lucide="${data.icon}" class="h-5 w-5 text-[#FF6B00] flex-shrink-0"></i>
                <h3 class="text-base font-semibold text-white group-hover:text-[#FF6B00] transition-colors">${data.name}</h3>
              </div>
              <span class="text-sm text-white/80 font-medium whitespace-nowrap">${data.price}</span>
            </div>
            <p class="text-sm text-white/60 mb-4 flex-1">${data.description}</p>
            <div class="flex flex-wrap gap-2">
              <button class="service-view-samples inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/5 px-3 py-2 text-xs text-white/80 hover:text-white hover:bg-white/10 hover:border-white/20 transition-all" data-category="${data.category}">
                <i data-lucide="images" class="h-3 w-3"></i>
                View Samples
              </button>
              <a href="https://wa.me/${siteSettings.contact?.phone || '2348147732687'}?text=${encodeURIComponent('Hello, I\'m interested in: ' + data.name + ' (' + data.price + ')')}" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-3 py-2 text-xs text-white hover:bg-[#ff7b1b] transition-colors">
                <i data-lucide="message-circle" class="h-3 w-3"></i>
                Order Now
              </a>
            </div>
          </div>
        </div>
      `;
      listEl.appendChild(article);
    });

    // ✅ FIXED: Only one forEach for click listeners now
    document.querySelectorAll('.service-view-samples').forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.dataset.category;
        if (category && portfolioData[category]) {
          openGallery(category);
        } else {
          showToast('No samples available for this service yet', 'info');
        }
      });
    });

    // Cache services
    cacheData(CACHE_KEYS.SERVICES, servicesArray);
    
    if (window.lucide) window.lucide.createIcons();
  } catch (error) {
    console.error('Services error:', error);
    // ✅ NEW: Show error state to user
    const listEl = document.getElementById('servicesList');
    if (listEl) {
      listEl.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-white/40 text-sm">Unable to load services. Please refresh the page.</p></div>';
    }
  }
}

// Load client reviews
async function loadReviews() {
  try {
    const reviewsArray = [];
    const q = query(collection(db, 'reviews'), where('active', '==', true), orderBy('order'));
    const snapshot = await getDocs(q);
    
    const container = document.getElementById('reviewsList');
    
    if (snapshot.empty) {
      container.innerHTML = `
        <div class="col-span-full text-center py-12">
          <p class="text-white/40 text-sm">No reviews yet.</p>
        </div>
      `;
      return;
    }

    container.innerHTML = '';
    snapshot.forEach(doc => {
      const data = doc.data();
      reviewsArray.push(data); // ✅ FIXED: Moved here, inside the loop
      
      const card = document.createElement('div');
      card.className = 'rounded-xl border border-white/10 bg-white/5 p-6 hover:bg-white/10 hover:border-white/20 transition-all duration-300';
      
      // Generate star rating
      const stars = Array(5).fill(0).map((_, i) => 
        `<i data-lucide="star" class="h-4 w-4 ${i < data.rating ? 'fill-[#FF6B00] text-[#FF6B00]' : 'text-white/20'}"></i>`
      ).join('');
      
      card.innerHTML = `
        <div class="flex items-center gap-3 mb-4">
          <div class="h-12 w-12 rounded-full bg-gradient-to-br from-[#FF6B00]/20 to-white/5 flex items-center justify-center text-white font-semibold">
            ${data.clientName.charAt(0)}
          </div>
          <div class="flex-1">
            <h3 class="text-base font-semibold text-white">${data.clientName}</h3>
            <p class="text-xs text-white/60">${data.projectType || 'Client'}</p>
          </div>
        </div>
        <div class="flex items-center gap-1 mb-3">
          ${stars}
        </div>
        <p class="text-sm text-white/70 leading-relaxed mb-3">${data.review}</p>
        ${data.imageUrl ? `
          <div class="mt-3 rounded-lg border border-white/10 overflow-hidden cursor-pointer hover:border-[#FF6B00]/50 transition-colors group" onclick="openReviewImage('${data.imageUrl}', '${data.clientName}')">
            <img src="${data.imageUrl}" alt="Review evidence from ${data.clientName}" class="w-full h-32 object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy">
            <div class="bg-white/5 px-3 py-2 flex items-center gap-2">
              <i data-lucide="image" class="h-3 w-3 text-[#FF6B00]"></i>
              <span class="text-xs text-white/60">Click to view evidence</span>
            </div>
          </div>
        ` : ''}
      `;

      container.appendChild(card);
    });
    
    // Cache reviews
    cacheData(CACHE_KEYS.REVIEWS, reviewsArray);

    if (window.lucide) window.lucide.createIcons();
  } catch (error) {
    console.error('Reviews error:', error);
    const container = document.getElementById('reviewsList');
    if (container) {
      container.innerHTML = `
        <div class="col-span-full text-center py-12">
          <p class="text-white/40 text-sm">Unable to load reviews. Please refresh the page.</p>
        </div>
      `;
    }
  }
}

    // Load portfolio
    async function loadPortfolio() {
      try {
        const q = query(collection(db, 'portfolioItems'), orderBy('order'));
        const snapshot = await getDocs(q);
        
        portfolioData = {};
        snapshot.forEach(doc => {
          const data = doc.data();
          if (!portfolioData[data.category]) {
            portfolioData[data.category] = {
              display: data.categoryDisplay,
              items: []
            };
          }
          portfolioData[data.category].items.push(data);
        });

        renderPortfolioCategories();
        
        // Cache portfolio
        cacheData(CACHE_KEYS.PORTFOLIO, portfolioData);
      } catch (error) {
        console.error('Portfolio error:', error);
      }
    }

    function renderPortfolioCategories() {
      const container = document.getElementById('portfolioCategories');
      
      if (Object.keys(portfolioData).length === 0) {
        container.innerHTML = '<p class="text-white/60 col-span-full">No portfolio items yet.</p>';
        return;
      }

      const categoryIcons = {
        birthday: 'sparkles', academic: 'book-open', wedding: 'heart',
        business: 'megaphone', movie: 'clapperboard', church: 'church', brand: 'pen-tool'
      };

      container.innerHTML = '';
      Object.keys(portfolioData).forEach(category => {
        const data = portfolioData[category];
        const card = document.createElement('button');
        card.className = 'shimmer-on-hover rounded-xl border border-white/10 bg-white/5 p-6 hover:bg-white/10 hover:border-white/20 transition-colors text-left group cursor-pointer';
          card.innerHTML = `
          <div class="flex items-center gap-3 mb-3">
            <i data-lucide="${categoryIcons[category] || 'image'}" class="h-6 w-6 text-[#FF6B00]"></i>
            <h3 class="text-base font-semibold text-white group-hover:text-[#FF6B00] transition-colors">${data.display}</h3>
          </div>
          <p class="text-sm text-white/60">${data.items.length} design${data.items.length !== 1 ? 's' : ''}</p>
          <div class="mt-4 flex items-center gap-2 text-xs text-white/50">
            <span>Click to view gallery</span>
            <i data-lucide="arrow-right" class="h-3 w-3"></i>
          </div>
        `;
        
        card.addEventListener('click', () => openGallery(category));
        container.appendChild(card);
      });

      if (window.lucide) window.lucide.createIcons();
    }

function scrollToPortfolio() {
  const portfolioSection = document.getElementById('portfolio');
  if (portfolioSection) {
    portfolioSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

    // Gallery functions
    function openGallery(category) {
  scrollToPortfolio();
  
  if (!portfolioData[category]) return;
      
      currentGallery = portfolioData[category].items;
      currentGalleryIndex = 0;
      
      document.getElementById('galleryTitle').textContent = portfolioData[category].display;
      document.getElementById('portfolioGallery').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      // Show loading spinner briefly
      const spinner = document.getElementById('galleryLoadingSpinner');
      const cardStack = document.getElementById('cardStack');
      
      spinner.classList.remove('hidden');
      cardStack.style.opacity = '0';
      
      // Render cards with slight delay for smooth transition
      setTimeout(() => {
        renderCardStack();
        spinner.classList.add('hidden');
        cardStack.style.opacity = '1';
        
        // ATTACH NAVIGATION LISTENERS NOW (when gallery is visible)
        attachGalleryNavListeners();
        
        if (window.lucide) window.lucide.createIcons();
      }, 300);
    }

// Attach navigation listeners when gallery opens
    function attachGalleryNavListeners() {
      console.log('🔗 Attaching gallery navigation listeners...');
      
      const prevBtn = document.getElementById('prevCard');
      const nextBtn = document.getElementById('nextCard');
      
      console.log('prevCard button:', prevBtn);
      console.log('nextCard button:', nextBtn);
    
      if (prevBtn) {
        // Remove old listener if exists
        prevBtn.replaceWith(prevBtn.cloneNode(true));
        const newPrevBtn = document.getElementById('prevCard');
        
        newPrevBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          console.log('✅ Previous button clicked!');
          navigateGallery(-1);
        });
        console.log('✅ Previous listener attached');
      } else {
        console.error('❌ prevCard not found');
      }
    }

      if (nextBtn) {
        // Remove old listener if exists
        nextBtn.replaceWith(nextBtn.cloneNode(true));
        const newNextBtn = document.getElementById('nextCard');
        
        newNextBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          console.log('✅ Next button clicked!');
          navigateGallery(1);
        });
        console.log('✅ Next listener attached');
      } else {
        console.error('❌ nextCard not found');
      }

    function renderCardStack() {
      const stack = document.getElementById('cardStack');
      if (!stack || !currentGallery || currentGallery.length === 0) {
        console.error('Cannot render card stack - missing data');
        return;
      }
      
      const totalCards = currentGallery.length;
      
      document.getElementById('galleryCounter').textContent = `${currentGalleryIndex + 1} / ${totalCards}`;
      
      stack.innerHTML = currentGallery.map((item, index) => {
        let positionClass = 'hidden';
        const diff = index - currentGalleryIndex;
        
        if (diff === 0) positionClass = 'featured';
        else if (diff === -1 || (currentGalleryIndex === 0 && index === totalCards - 1)) positionClass = 'left';
        else if (diff === 1 || (currentGalleryIndex === totalCards - 1 && index === 0)) positionClass = 'right';
        
        return `
          <div class="stack-card ${positionClass} border border-white/10 bg-[#0B0F19] ${diff === 0 ? 'shimmer-on-hover cursor-pointer hover:opacity-90 transition-opacity' : ''}" data-index="${index}">
            <div class="aspect-square bg-black/20 flex items-center justify-center p-4 relative group">
              <img src="${item.imageUrl}" alt="${item.title}" class="max-h-full max-w-full object-contain">
              ${diff === 0 ? `
                <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30">
                  <div class="rounded-full bg-white/20 backdrop-blur-sm p-3 border border-white/30">
                    <i data-lucide="maximize-2" class="h-6 w-6 text-white"></i>
                  </div>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }).join('');

      // Add click listeners to featured card
      const featuredCard = stack.querySelector('.stack-card.featured');
      if (featuredCard) {
        featuredCard.addEventListener('click', () => {
          const current = currentGallery[currentGalleryIndex];
          openImageLightbox(
            current.imageUrl,
            current.title,
            current.categoryDisplay || current.category,
            current.price,
            current
          );
        });
      }

      updateGalleryInfo();
      if (window.lucide) window.lucide.createIcons();
    }

    function updateGalleryInfo() {
      const current = currentGallery[currentGalleryIndex];
      document.getElementById('currentTitle').textContent = current.title;
      document.getElementById('currentPrice').textContent = current.price;
      
      const phone = siteSettings.contact?.phone || '2348147732687';
      const message = encodeURIComponent(`Hello Deyoungprof, I am interested in: ${current.title} (${current.price}).`);
      document.getElementById('galleryWhatsApp').href = `https://wa.me/${phone}?text=${message}`;
    }

    function navigateGallery(direction) {
      if (!currentGallery || currentGallery.length === 0) {
        console.error('Cannot navigate - gallery is empty');
        return;
      }
      
      console.log(`Navigating ${direction > 0 ? 'forward' : 'backward'} from index ${currentGalleryIndex}`);
      
      // Add loading indicator during navigation
      const cardStack = document.getElementById('cardStack');
      if (!cardStack) {
        console.error('Card stack element not found');
        return;
      }
      
      cardStack.style.opacity = '0.5';
      cardStack.style.pointerEvents = 'none';
      
      // Calculate new index with wrapping
      const oldIndex = currentGalleryIndex;
      currentGalleryIndex = (currentGalleryIndex + direction + currentGallery.length) % currentGallery.length;
      
      console.log(`Navigated from ${oldIndex} to ${currentGalleryIndex}`);
      
      // Small delay for smooth transition
      setTimeout(() => {
        // Re-render the card stack
        renderCardStack();
        
        // Restore opacity
        cardStack.style.opacity = '1';
        cardStack.style.pointerEvents = 'auto';
        
      }, 150);
    }

    // Gallery navigation event listeners (set up once, reused for all galleries)
    function setupGalleryNavigation() {
      console.log('🔧 Setting up gallery navigation...');
      
      // Close button
      const closeBtn = document.getElementById('closeGallery');
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          document.getElementById('portfolioGallery').classList.add('hidden');
          document.body.style.overflow = '';
        });
        console.log('✅ Close button listener attached');
      }

      // Previous button
      const prevBtn = document.getElementById('prevCard');
      console.log('prevCard button:', prevBtn);
      if (prevBtn) {
        prevBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          console.log('Previous button clicked');
          navigateGallery(-1);
        });
        console.log('✅ Previous button listener attached');
      } else {
        console.error('❌ prevCard button not found');
      }

      // Next button
      const nextBtn = document.getElementById('nextCard');
      console.log('nextCard button:', nextBtn);
      if (nextBtn) {
        nextBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          console.log('Next button clicked');
          navigateGallery(1);
        });
        console.log('✅ Next button listener attached');
      } else {
        console.error('❌ nextCard button not found');
      }

      // Close gallery on background click
      const gallery = document.getElementById('portfolioGallery');
      if (gallery) {
        gallery.addEventListener('click', (e) => {
          if (e.target.id === 'portfolioGallery') {
            gallery.classList.add('hidden');
            document.body.style.overflow = '';
          }
        });
        console.log('✅ Background click listener attached');
      }
    }
    // Call setup once
    setupGalleryNavigation();
    
    // Add touch swipe to gallery
    function initializeGallerySwipe() {
      let galleryTouchStartX = 0;
      const cardStack = document.getElementById('cardStack');
      
      if (!cardStack) {
        console.error('Card stack not found for swipe initialization');
        return;
      }
      
      cardStack.addEventListener('touchstart', (e) => {
        galleryTouchStartX = e.changedTouches[0].screenX;
      }, { passive: true });
      
      cardStack.addEventListener('touchend', (e) => {
        const touchEndX = e.changedTouches[0].screenX;
        const diff = galleryTouchStartX - touchEndX;
        if (Math.abs(diff) > 50) {
          console.log('Swipe detected:', diff > 0 ? 'left' : 'right');
          if (diff > 0) navigateGallery(1);
          else navigateGallery(-1);
        }
      }, { passive: true });
      
      console.log('✅ Gallery swipe initialized');
    }
    
    // Initialize swipe
    initializeGallerySwipe();

    // Keyboard navigation for gallery and lightbox
    document.addEventListener('keydown', (e) => {
      const galleryEl = document.getElementById('portfolioGallery');
      const lightboxEl = document.getElementById('imageLightbox');
      
      if (!galleryEl || !lightboxEl) return;
      
      const galleryOpen = !galleryEl.classList.contains('hidden');
      const lightboxOpen = !lightboxEl.classList.contains('hidden');
      
      // If lightbox is open, only allow ESC to close it
      if (lightboxOpen) {
        if (e.key === 'Escape') {
          closeLightbox();
          e.preventDefault();
        }
        return; // Don't handle other keys when lightbox is open
      }
      
      // If gallery is open, handle navigation
      if (galleryOpen) {
        if (e.key === 'ArrowLeft') {
          e.preventDefault();
          console.log('Left arrow pressed');
          navigateGallery(-1);
        } else if (e.key === 'ArrowRight') {
          e.preventDefault();
          console.log('Right arrow pressed');
          navigateGallery(1);
        } else if (e.key === 'Escape') {
          e.preventDefault();
          galleryEl.classList.add('hidden');
          document.body.style.overflow = '';
        }
      }
    });

    // Mobile menu
    function initializeMobileMenu() {
      const btn = document.getElementById('mobileMenuBtn');
      const menu = document.getElementById('mobileMenu');
      let isOpen = false;

      btn?.addEventListener('click', () => {
        isOpen = !isOpen;
        menu.style.maxHeight = isOpen ? '320px' : '0px';
      });

      menu.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          isOpen = false;
          menu.style.maxHeight = '0px';
        });
      });
    }

    // Header scroll behavior
function initializeHeader() {
  const header = document.getElementById('site-header');
  const updateHeader = () => {
    const scrolled = window.scrollY > 8;
    if (scrolled) {
      header.style.backgroundColor = 'var(--header-bg)';
      header.style.backdropFilter = 'blur(16px) saturate(180%)';
      header.style.webkitBackdropFilter = 'blur(16px) saturate(180%)';
      header.style.borderBottom = '1px solid var(--border-color)';
    } else {
      header.style.backgroundColor = 'transparent';
      header.style.backdropFilter = 'none';
      header.style.webkitBackdropFilter = 'none';
      header.style.borderBottom = 'none';
    }
  };
  updateHeader();
  window.addEventListener('scroll', updateHeader);
}

    // Contact form
    function initializeContactForm() {
      const form = document.getElementById('contactForm');
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const message = form.message.value.trim();
        const phone = siteSettings.contact?.phone || '2348147732687';
        const waText = `Hello Deyoungprof,%0A%0AName: ${encodeURIComponent(name)}%0AEmail: ${encodeURIComponent(email)}%0A%0AProject:%0A${encodeURIComponent(message)}`;
        window.open(`https://wa.me/${phone}?text=${waText}`, '_blank', 'noopener');
      });
    }

    // ========== LIGHTBOX FUNCTIONS - NEW SECTION ==========
    function openImageLightbox(imageUrl, title, category, price, itemData = null) {
      const lightboxImage = document.getElementById('lightboxImage');
      
      // Show loading state
      lightboxImage.style.opacity = '0.3';
      lightboxImage.classList.add('loading-pulse');
      
      // Create a new image to preload
      const img = new Image();
      img.onload = () => {
        lightboxImage.src = imageUrl;
        lightboxImage.style.opacity = '1';
        lightboxImage.classList.remove('loading-pulse');
      };
      img.onerror = () => {
        lightboxImage.style.opacity = '1';
        lightboxImage.classList.remove('loading-pulse');
      };
      img.src = imageUrl;
      
      document.getElementById('lightboxTitle').textContent = 'Full View';
      document.getElementById('lightboxItemTitle').textContent = title || '';
      document.getElementById('lightboxCategory').textContent = category || '';
      document.getElementById('lightboxPrice').textContent = price || '';
      
      const phone = siteSettings.contact?.phone || '2348147732687';
      const message = encodeURIComponent(`Hello Deyoungprof, I am interested in: ${title} (${price}).`);
      document.getElementById('lightboxWhatsApp').href = `https://wa.me/${phone}?text=${message}`;
      
      document.getElementById('imageLightbox').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      if (window.lucide) window.lucide.createIcons();
    }

    function closeLightbox() {
      document.getElementById('imageLightbox').classList.add('hidden');
      
      // Check if gallery is still open behind lightbox
      const galleryOpen = !document.getElementById('portfolioGallery').classList.contains('hidden');
      if (galleryOpen) {
        // Keep body overflow hidden if gallery is still open
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    }

    // Lightbox event listeners
    document.getElementById('closeLightbox')?.addEventListener('click', closeLightbox);
    
    document.getElementById('imageLightbox')?.addEventListener('click', (e) => {
      if (e.target.id === 'imageLightbox') closeLightbox();
    });

    // ========== END LIGHTBOX FUNCTIONS ==========

    // ========== THEME TOGGLE FUNCTIONS ==========
function initializeTheme() {
  // Check for saved theme preference or default to system preference
  const savedTheme = localStorage.getItem('deyoungprof-theme');
  let initialTheme;
  
  if (savedTheme) {
    initialTheme = savedTheme;
  } else {
    // Detect system preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    initialTheme = prefersDark ? 'dark' : 'light';
  }
  
  applyTheme(initialTheme);
  
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }
  
  // Listen for system theme changes (optional - only if user hasn't manually set theme)
  if (!savedTheme) {
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      const newTheme = e.matches ? 'dark' : 'light';
      applyTheme(newTheme);
    });
  }
}

    function applyTheme(theme) {
      if (theme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        updateThemeIcon('moon');
      } else {
        document.documentElement.removeAttribute('data-theme');
        updateThemeIcon('sun');
      }
      localStorage.setItem('deyoungprof-theme', theme);
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      applyTheme(newTheme);
    }

    function updateThemeIcon(iconName) {
      const themeIcon = document.getElementById('themeIcon');
      if (themeIcon && window.lucide) {
        themeIcon.setAttribute('data-lucide', iconName);
        window.lucide.createIcons();
      }
    }
    // ========== END THEME TOGGLE FUNCTIONS ==========

    // ========== REVIEW IMAGE LIGHTBOX ==========
    window.openReviewImage = function(imageUrl, clientName) {
      const lightbox = document.getElementById('reviewImageLightbox');
      const img = document.getElementById('reviewImageSrc');
      const title = document.getElementById('reviewImageTitle');
      
      img.src = imageUrl;
      title.textContent = `Evidence from ${clientName}`;
      lightbox.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      if (window.lucide) window.lucide.createIcons();
    };

    window.closeReviewImageLightbox = function() {
      const lightbox = document.getElementById('reviewImageLightbox');
      lightbox.classList.add('hidden');
      document.body.style.overflow = '';
    };
    // ========== END REVIEW IMAGE LIGHTBOX ==========

// Register Service Worker for PWA
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js')
      .then(reg => {
        console.log('✅ Service Worker registered');
        
        // Check for updates
        reg.addEventListener('updatefound', () => {
          const newWorker = reg.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              showToast('New version available! Refresh to update.', 'info');
            }
          });
        });
      })
      .catch(err => console.log('❌ Service Worker registration failed:', err));
  });
}

// PWA Install Prompt
let deferredPrompt;
const installBtn = document.getElementById('installAppBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.classList.remove('hidden');
  installBtn.classList.add('inline-flex');
  if (window.lucide) window.lucide.createIcons();
});

installBtn?.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  
  if (outcome === 'accepted') {
    showToast('App installed successfully!', 'success');
  }
  
  deferredPrompt = null;
  installBtn.classList.add('hidden');
});

window.addEventListener('appinstalled', () => {
  deferredPrompt = null;
  installBtn.classList.add('hidden');
  showToast('Deyoungprof Creative Hub installed!', 'success');
});

// Offline Detection
const offlineIndicator = document.getElementById('offlineIndicator');

function updateOnlineStatus() {
  if (navigator.onLine) {
    offlineIndicator?.classList.add('hidden');
    offlineIndicator?.classList.remove('flex');
  } else {
    offlineIndicator?.classList.remove('hidden');
    offlineIndicator?.classList.add('flex');
    showToast('You are offline. Some features may be limited.', 'info');
  }
  if (window.lucide) window.lucide.createIcons();
}

window.addEventListener('online', () => {
  updateOnlineStatus();
  showToast('Back online!', 'success');
});

window.addEventListener('offline', updateOnlineStatus);

// Initial check
updateOnlineStatus();

// Toast function (if not already defined)
function showToast(message, type = 'info') {
  const toast = document.createElement('div');
  toast.className = `fixed top-20 right-4 z-[200] rounded-lg border px-4 py-3 shadow-lg animate-slide-in ${
    type === 'success' ? 'bg-green-500/10 border-green-500/50 text-green-400' :
    type === 'error' ? 'bg-red-500/10 border-red-500/50 text-red-400' :
    'bg-blue-500/10 border-blue-500/50 text-blue-400'
  }`;
  toast.innerHTML = `<p class="text-sm">${message}</p>`;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 5000);
}
  </script>
</body>
</html>
