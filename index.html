<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deyoungprof Creative Hub — Forward‑Thinking Design Studio in Lagos</title>
  <meta name="description" content="Deyoungprof Creative Hub is a forward-thinking design studio in Lagos, Nigeria. We craft standout designs — logos, brand kits, flyers, wedding and event graphics, academic covers, and more.">
  <meta name="theme-color" content="#0A0F1C">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/lucide@latest"></script>
  
  <style>
:root {
  --bg-primary: #0A0F1C;
  --bg-secondary: #0B1224;
  --bg-tertiary: #0B0F19;
  --text-primary: rgba(255, 255, 255, 0.9);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.6);
  --border-color: rgba(255, 255, 255, 0.1);
  --accent-color: #FF6B00;
  --header-bg: rgba(10, 15, 28, 0.8);
  --card-bg: rgba(255, 255, 255, 0.05);
  --card-hover-bg: rgba(255, 255, 255, 0.1);
}

[data-theme="light"] {
  --bg-primary: #FFFFFF;
  --bg-secondary: #F8F9FA;
  --bg-tertiary: #F1F3F5;
  --text-primary: rgba(0, 0, 0, 0.9);
  --text-secondary: rgba(0, 0, 0, 0.7);
  --text-tertiary: rgba(0, 0, 0, 0.6);
  --border-color: rgba(0, 0, 0, 0.15);
  --accent-color: #FF6B00;
  --header-bg: rgba(255, 255, 255, 0.7);
  --card-bg: rgba(0, 0, 0, 0.03);
  --card-hover-bg: rgba(0, 0, 0, 0.06);
}

* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

body {
  scroll-behavior: smooth;
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  position: relative;
  isolation: isolate;
}

/* Light mode specific adjustments */
[data-theme="light"] .bg-\[\#0A0F1C\]\/98,
[data-theme="light"] .bg-\[\#0A0F1C\]\/95,
[data-theme="light"] .bg-\[\#0A0F1C\]\/80,
[data-theme="light"] .bg-black\/90,
[data-theme="light"] .bg-black\/70 {
  background-color: rgba(255, 255, 255, 0.7) !important;
  border-color: var(--border-color) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
}

[data-theme="light"] .text-white,
[data-theme="light"] .text-white\/90,
[data-theme="light"] .text-white\/80,
[data-theme="light"] .text-white\/70,
[data-theme="light"] .text-white\/60,
[data-theme="light"] .text-white\/50 {
  color: var(--text-primary) !important;
}

[data-theme="light"] .border-white\/10,
[data-theme="light"] .border-white\/20 {
  border-color: var(--border-color) !important;
}

[data-theme="light"] .bg-white\/5,
[data-theme="light"] .bg-white\/10 {
  background-color: var(--card-bg) !important;
}

[data-theme="light"] .hover\:bg-white\/5:hover,
[data-theme="light"] .hover\:bg-white\/10:hover {
  background-color: var(--card-hover-bg) !important;
}

/* Fix loading overlay in light mode */
[data-theme="light"] .loading-overlay {
  background: rgba(255, 255, 255, 0.95);
}

[data-theme="light"] .loading-overlay .text-white\/80,
[data-theme="light"] .loading-overlay .text-white\/50 {
  color: rgba(0, 0, 0, 0.8) !important;
}

/* Fix hero gradient in light mode */
[data-theme="light"] #home .absolute.inset-0.-z-10 {
  opacity: 1 !important;
}
    
/* Light gray hero background in light mode - lighter at top */
[data-theme="light"] #home .bg-gradient-to-b {
  background: linear-gradient(to bottom, rgba(241, 245, 249, 0.85), rgba(226, 232, 240, 0.85)) !important;
}

[data-theme="light"] #home .absolute.inset-0.-z-10 {
  opacity: 1 !important;
}

[data-theme="light"] #home h1 {
  color: #111827 !important;
}

[data-theme="light"] #home p {
  color: #374151 !important;
}

[data-theme="light"] #home .rounded-full.border {
  background-color: white !important;
  border-color: #d1d5db !important;
  color: #4b5563 !important;
}

/* Make background image visible in light mode */
[data-theme="light"] #hero-bg-image {
  filter: invert(1) !important;
  opacity: 0.12 !important;
  mix-blend-mode: multiply !important;
}

#carouselTrack {
  font-size: 0;
  letter-spacing: 0;
}

#carouselTrack > div {
  font-size: 1rem; /* Reset font-size for children */
}

    .img-placeholder {
      background: linear-gradient(135deg, rgba(255,107,0,0.15) 0%, rgba(255,107,0,0.05) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .img-placeholder::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,107,0,0.03) 10px, rgba(255,107,0,0.03) 20px),
        repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255,107,0,0.03) 10px, rgba(255,107,0,0.03) 20px);
    }
    
    .img-placeholder-text {
      position: relative;
      z-index: 1;
      color: rgba(255,255,255,0.4);
      font-size: 0.875rem;
      text-align: center;
      padding: 1rem;
    }

    /* Card Stack Gallery Styles */
    .card-stack-container {
      position: relative;
      perspective: 1000px;
    }

    .card-stack {
      position: relative;
      width: 100%;
      height: 500px;
      overflow: hidden;
      isolation: isolate;
      transition: opacity 0.3s ease;
    }

    .stack-card {
      position: absolute;
      width: 80%;
      max-width: 100%;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 12px;
      overflow: hidden;
      will-change: transform, opacity;
      backface-visibility: hidden;
    }

    .stack-card.featured {
      z-index: 30;
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .stack-card.left {
      z-index: 20;
      transform: translate(-120%, -50%) scale(0.85) rotateY(15deg);
      opacity: 0.7;
    }

    .stack-card.right {
      z-index: 20;
      transform: translate(20%, -50%) scale(0.85) rotateY(-15deg);
      opacity: 0.7;
    }

    .stack-card.hidden {
      z-index: 10;
      transform: translate(-50%, -50%) scale(0.7);
      opacity: 0;
      pointer-events: none;
    }

    img {
      display: block;
    }

    /* Modal and Overlay Z-index Fixes */
    #portfolioGallery {
      isolation: isolate;
    }

    #imageLightbox {
      isolation: isolate;
    }

    .card-stack-container {
      isolation: isolate;
    }

    /* Prevent overflow issues */
    #portfolioGallery > div:first-child,
    #imageLightbox > div:first-child {
      pointer-events: auto;
    }

    /* Loading Spinner Animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 107, 0, 0.1);
      border-top-color: #FF6B00;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    .loading-pulse {
      animation: pulse 1.5s ease-in-out infinite;
    }

    .skeleton-loading {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.05) 25%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0.05) 75%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Loading overlay */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(10, 15, 28, 0.95);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease;
    }

    .loading-overlay.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    /* Navigation button active states */
    #prevCard:active,
    #nextCard:active,
    #prevSlide:active,
    #nextSlide:active {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 0.1);
    }

    /* Prevent text selection during rapid navigation */
    .card-stack-container {
      user-select: none;
      -webkit-user-select: none;
    }
  </style>
</head>
<body class="antialiased transition-colors duration-300" style="background-color: var(--bg-primary); color: var(--text-primary);">

  <!-- Loading Overlay -->
  <div id="pageLoader" class="loading-overlay">
    <div class="flex flex-col items-center gap-4">
      <div class="loading-spinner"></div>
      <div class="text-center">
        <p class="text-white/80 text-sm font-medium">Loading Deyoungprof Creative Hub</p>
        <p class="text-white/50 text-xs mt-1">Preparing your experience...</p>
      </div>
    </div>
  </div>

  <!-- Sticky Header -->
  <header id="site-header" class="fixed top-0 inset-x-0 z-50 transition-all duration-300">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-20 items-center justify-between">
        <!-- Logo -->
        <a href="#home" class="group inline-flex items-center gap-3">
          <div class="h-12 w-12 rounded-md border border-white/10 bg-white/5 grid place-items-center transition-all duration-300 group-hover:bg-white/10 group-hover:border-white/20 overflow-hidden">
            <img id="headerLogo" src="" alt="Deyoungprof Logo" class="h-full w-full object-contain p-1 hidden">
            <span id="headerLogoFallback" class="text-white font-medium tracking-tight" style="font-size:16px; letter-spacing:-0.02em;">DP</span>
          </div>
          <div class="flex flex-col leading-none">
            <span class="text-base text-white/80">Deyoungprof</span>
            <span class="text-sm text-white/50 -mt-0.5">Creative Hub</span>
          </div>
        </a>

        <!-- Nav -->
        <nav class="hidden md:flex items-center gap-6">
          <a href="#home" class="text-sm text-white/70 hover:text-white transition-colors">Home</a>
          <a href="#services" class="text-sm text-white/70 hover:text-white transition-colors">Services</a>
          <a href="#portfolio" class="text-sm text-white/70 hover:text-white transition-colors">Portfolio</a>
          <a href="#about" class="text-sm text-white/70 hover:text-white transition-colors">About</a>
          <a href="#contact" class="text-sm text-white/70 hover:text-white transition-colors">Contact</a>
        </nav>

        <!-- Header CTAs -->
        <div class="flex items-center gap-3">
          <button id="themeToggle" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 transition-all" aria-label="Toggle theme">
  <i data-lucide="sun" class="h-4 w-4" id="themeIcon"></i>
</button>
<a href="#portfolio" class="hidden sm:inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20 transition-all">
  <i data-lucide="images" class="h-4 w-4"></i>
  <span>Portfolio</span>
</a>
          <a id="headerWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-3.5 py-2 text-sm text-white hover:bg-[#ff7b1b] outline-none ring-0 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#FF6B00] transition-colors">
            <i data-lucide="message-circle" class="h-4 w-4"></i>
            <span class="hidden sm:inline">Chat on WhatsApp</span>
            <span class="sm:hidden">WhatsApp</span>
          </a>
          <button class="md:hidden inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20" aria-label="Open Menu" id="mobileMenuBtn">
            <i data-lucide="menu" class="h-5 w-5"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="md:hidden max-h-0 overflow-hidden border-t border-white/10 bg-[#0A0F1C]/98 backdrop-blur-xl transition-all duration-300 relative z-50">
      <nav class="mx-auto max-w-7xl px-4 py-3 flex flex-col gap-2">
        <a href="#home" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Home</a>
        <a href="#services" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Services</a>
        <a href="#portfolio" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Portfolio</a>
        <a href="#about" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">About</a>
        <a href="#contact" class="rounded-md px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 transition-colors">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
<section id="home" class="relative pt-32 md:pt-36 lg:pt-40 overflow-hidden scroll-mt-24">
  <!-- Background gradient + shapes -->
  <div class="absolute inset-0 -z-10">
  <div class="absolute inset-0 bg-gradient-to-b from-[#0A0F1C] via-[#0B1224] to-[#0B0F19]"></div>
      <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full opacity-20 blur-3xl" style="background: radial-gradient(60% 60% at 50% 50%, rgba(255,107,0,0.20) 0%, rgba(255,107,0,0.05) 60%, transparent 100%);"></div>
      <div class="absolute -bottom-32 -right-16 h-96 w-96 rounded-full opacity-20 blur-3xl" style="background: radial-gradient(60% 60% at 50% 50%, rgba(255,107,0,0.18) 0%, rgba(255,107,0,0.04) 60%, transparent 100%);"></div>
      <div id="hero-bg-image" class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=1200&auto=format&fit=crop')] bg-center bg-cover opacity-[0.06] mix-blend-screen"></div>
    </div>

    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative">
      <div class="grid lg:grid-cols-2 gap-10 items-stretch">
        <div>
          <p class="mb-4 inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1.5 text-xs text-white/70">
  <span class="inline-flex h-1.5 w-1.5 rounded-full bg-[#FF6B00]"></span>
  Lagos, Nigeria — Creative Studio
</p>
          <h1 class="text-5xl sm:text-6xl lg:text-7xl tracking-tight font-semibold text-white leading-tight" style="font-family: 'Nexa Bold','Poppins',sans-serif;">
  Turning Ideas Into Standout Designs That Connect.
</h1>
<p class="mt-6 text-lg sm:text-xl text-white/70 max-w-2xl leading-relaxed">
            We help businesses build strong brand identities with creative, high-impact visuals.
          </p>

          <div class="mt-8 flex flex-col sm:flex-row gap-3">
            <a href="#portfolio" class="inline-flex items-center justify-center gap-2 rounded-md bg-white text-[#0A0F1C] px-5 py-3 text-sm font-medium hover:bg-white/90 transition-colors outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white">
              <i data-lucide="folder-open" class="h-5 w-5"></i>
              View Portfolio
            </a>
            <a id="heroWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center justify-center gap-2 rounded-md bg-[#FF6B00] px-5 py-3 text-sm text-white hover:bg-[#ff7b1b] outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#FF6B00]">
              <i data-lucide="message-circle" class="h-5 w-5"></i>
              Chat on WhatsApp
            </a>
          </div>

          <!-- Hero Highlights (loaded from Firebase) -->
          <div id="heroHighlights" class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-3">
            <!-- Loading skeleton -->
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-5 skeleton-loading">
              <div class="h-6 w-6 bg-white/10 rounded mb-2"></div>
              <div class="h-4 w-24 bg-white/10 rounded mb-2"></div>
              <div class="h-3 w-full bg-white/10 rounded"></div>
            </div>
          </div>
        </div>

        <!-- Carousel -->
<div class="relative h-full flex flex-col">
  <div class="rounded-xl border border-white/10 bg-white/5 overflow-hidden shadow-[0_0_0_1px_rgba(255,255,255,0.04)_inset] flex-1 flex flex-col">
            <div class="relative flex-1 flex flex-col">
  <div id="carousel" class="relative overflow-hidden flex-1">
                <div class="whitespace-nowrap transition-transform duration-500 h-full" id="carouselTrack" style="transform: translateX(0%); font-size: 0;">
                  <!-- Carousel slides will be loaded here -->
                  <div class="inline-block align-top w-full">
                    <div class="aspect-video bg-black/30 relative flex items-center justify-center">
                      <p class="text-white/60">Loading carousel...</p>
                    </div>
                  </div>
                </div>
                <!-- Controls -->
                <div class="absolute inset-x-0 top-1/2 -translate-y-1/2 px-3 flex justify-between pointer-events-none">
                  <button id="prevSlide" class="pointer-events-auto inline-flex items-center justify-center rounded-md bg-black/30 hover:bg-black/50 border border-white/10 p-2 text-white/80 hover:text-white transition-colors">
                    <i data-lucide="chevron-left" class="h-5 w-5"></i>
                  </button>
                  <button id="nextSlide" class="pointer-events-auto inline-flex items-center justify-center rounded-md bg-black/30 hover:bg-black/50 border border-white/10 p-2 text-white/80 hover:text-white transition-colors">
                    <i data-lucide="chevron-right" class="h-5 w-5"></i>
                  </button>
                </div>
                <!-- Dots -->
                <div class="flex items-center justify-center gap-2 p-4" id="carouselDots">
                  <!-- Dots will be generated dynamically -->
                </div>
              </div>
            </div>
          </div>
          <p class="mt-3 text-xs text-white/50">Featured Portfolio Highlights</p>
        </div>
      </div>
    </div>
    <div class="h-16 sm:h-20"></div>
  </section>

  <!-- Services -->
  <section id="services" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Services</h2>
          <p class="mt-2 text-sm text-white/60 max-w-2xl">Polished design solutions with transparent pricing.</p>
        </div>
        <a id="servicesWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="hidden sm:inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-4 py-2 text-sm text-white hover:bg-[#ff7b1b]">
          <i data-lucide="shopping-bag" class="h-4 w-4"></i>
          Order via WhatsApp
        </a>
      </div>

      <div id="servicesList" class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
        <!-- Loading skeleton -->
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-5 skeleton-loading">
          <div class="h-5 w-32 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-full bg-white/10 rounded mb-2"></div>
          <div class="h-4 w-3/4 bg-white/10 rounded"></div>
        </div>
      </div>

      <div class="mt-8 flex">
        <a id="servicesWhatsApp2" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-5 py-3 text-sm text-white hover:bg-[#ff7b1b]">
          <span>Order Your Design → WhatsApp</span>
          <i data-lucide="arrow-right" class="h-4 w-4"></i>
        </a>
      </div>
    </div>
  </section>

  <!-- Portfolio -->
  <section id="portfolio" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Portfolio</h2>
          <p class="mt-2 text-sm text-white/60 max-w-2xl">Explore our work by category. Click any category to see our designs.</p>
        </div>
        <div class="hidden sm:flex items-center gap-2">
          <a href="#contact" class="inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-4 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
            <i data-lucide="mail" class="h-4 w-4"></i>
            Start a Project
          </a>
        </div>
      </div>

      <!-- Category Grid -->
      <div id="portfolioCategories" class="mt-8 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
        <!-- Loading skeleton -->
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 skeleton-loading">
          <div class="h-6 w-24 bg-white/10 rounded mb-3"></div>
          <div class="h-4 w-20 bg-white/10 rounded"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Portfolio Gallery Modal (Card Stack) -->
  <div id="portfolioGallery" class="fixed inset-0 z-[100] hidden">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-md"></div>
    <div class="relative h-full flex flex-col z-10">
      <!-- Header -->
      <div class="flex items-center justify-between px-4 sm:px-6 py-4 border-b border-white/10 bg-[#0A0F1C]/95 backdrop-blur-xl relative z-10">
        <div class="flex items-center gap-3">
          <i id="galleryIcon" data-lucide="image" class="h-5 w-5 text-[#FF6B00]"></i>
          <h3 id="galleryTitle" class="text-lg font-semibold text-white">Portfolio</h3>
          <span id="galleryCounter" class="text-sm text-white/60">1 / 1</span>
        </div>
        <button id="closeGallery" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>

      <!-- Card Stack Gallery -->
      <div class="flex-1 flex items-center justify-center p-4 overflow-hidden relative z-10">
        <div id="galleryLoadingSpinner" class="hidden">
          <div class="flex flex-col items-center gap-3">
            <div class="loading-spinner"></div>
            <p class="text-white/60 text-sm">Loading gallery...</p>
          </div>
        </div>
        <div class="card-stack-container w-full max-w-4xl mx-auto">
          <div class="card-stack relative" id="cardStack">
            <!-- Cards will be inserted here dynamically -->
          </div>
        </div>
      </div>

      <!-- Navigation & Info -->
      <div class="px-4 sm:px-6 py-4 border-t border-white/10 bg-[#0A0F1C]/95 backdrop-blur-xl relative z-10">
        <div class="max-w-4xl mx-auto flex items-center justify-between gap-4">
          <button id="prevCard" class="inline-flex items-center gap-2 rounded-md border border-white/10 px-4 py-2 text-sm hover:bg-white/5">
            <i data-lucide="chevron-left" class="h-4 w-4"></i>
            <span class="hidden sm:inline">Previous</span>
          </button>
          
          <div class="flex-1 text-center">
            <p id="currentTitle" class="text-sm font-medium text-white"></p>
            <p id="currentPrice" class="text-xs text-white/60 mt-1"></p>
          </div>

          <button id="nextCard" class="inline-flex items-center gap-2 rounded-md border border-white/10 px-4 py-2 text-sm hover:bg-white/5">
            <span class="hidden sm:inline">Next</span>
            <i data-lucide="chevron-right" class="h-4 w-4"></i>
          </button>
        </div>
        
        <div class="max-w-4xl mx-auto mt-4 flex justify-center">
          <a id="galleryWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-5 py-3 text-sm text-white hover:bg-[#ff7b1b]">
            <i data-lucide="message-circle" class="h-4 w-4"></i>
            Order This Design
          </a>
        </div>
      </div>
    </div>
  </div>

<!-- Full-Size Image Lightbox -->
  <div id="imageLightbox" class="fixed inset-0 z-[110] hidden">
    <div class="absolute inset-0 bg-black/95 backdrop-blur-md"></div>
    <div class="relative h-full flex flex-col z-10">
      <!-- Header -->
      <div class="flex items-center justify-between px-4 sm:px-6 py-4 bg-black/70 backdrop-blur-xl relative z-10">
        <div class="flex items-center gap-3">
          <i data-lucide="maximize-2" class="h-5 w-5 text-[#FF6B00]"></i>
          <h3 id="lightboxTitle" class="text-base font-semibold text-white">Full View</h3>
        </div>
        <button id="closeLightbox" class="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/0 p-2 text-white/80 hover:text-white hover:bg-white/10">
          <i data-lucide="x" class="h-5 w-5"></i>
        </button>
      </div>

      <!-- Image Container -->
      <div class="flex-1 flex items-center justify-center p-4 overflow-hidden relative z-10">
        <img id="lightboxImage" src="" alt="Full size view" class="max-w-full max-h-full object-contain relative z-10">
      </div>

      <!-- Footer with Info -->
      <div class="px-4 sm:px-6 py-4 bg-black/70 backdrop-blur-xl relative z-10">
        <div class="max-w-4xl mx-auto">
          <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div class="flex-1">
              <p id="lightboxItemTitle" class="text-sm font-medium text-white"></p>
              <div class="flex items-center gap-4 mt-1">
                <p id="lightboxCategory" class="text-xs text-white/60"></p>
                <p id="lightboxPrice" class="text-xs text-white/80"></p>
              </div>
            </div>
            <a id="lightboxWhatsApp" href="#" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-4 py-2 text-sm text-white hover:bg-[#ff7b1b]">
              <i data-lucide="message-circle" class="h-4 w-4"></i>
              Order This Design
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Our Creative Team -->
<section id="about" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white mb-4" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Our Creative Team</h2>
      <p class="text-sm text-white/70">
        A collective of talented designers dedicated to transforming ideas into visual excellence. We combine creativity, technical expertise, and strategic thinking to deliver designs that make an impact.
      </p>
    </div>

    <!-- Team Members Grid -->
    <div id="teamMembersGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Loading skeleton -->
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
      <div class="rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse">
        <div class="aspect-[4/3] bg-white/10 rounded-lg mb-4"></div>
        <div class="h-5 w-32 bg-white/10 rounded mb-2"></div>
        <div class="h-4 w-24 bg-white/10 rounded mb-3"></div>
        <div class="h-3 w-full bg-white/10 rounded mb-2"></div>
        <div class="h-3 w-3/4 bg-white/10 rounded"></div>
      </div>
    </div>
  </div>
</section>

  <!-- Contact -->
  <section id="contact" class="relative py-16 sm:py-20 border-t border-white/10 scroll-mt-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-10">
        <div>
          <h2 class="text-2xl sm:text-3xl tracking-tight font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Contact</h2>
          <p class="mt-3 text-sm text-white/70 max-w-2xl">Share your project details and we'll respond promptly.</p>

          <form id="contactForm" class="mt-6 space-y-4">
            <div>
              <label for="name" class="block text-xs text-white/60 mb-1">Name</label>
              <input id="name" name="name" type="text" placeholder="Your name" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0">
            </div>
            <div>
              <label for="email" class="block text-xs text-white/60 mb-1">Email</label>
              <input id="email" name="email" type="email" placeholder="you@email.com" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0">
            </div>
            <div>
              <label for="message" class="block text-xs text-white/60 mb-1">Message / Project Details</label>
              <textarea id="message" name="message" rows="5" placeholder="Tell us about your project…" required class="w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder-white/40 outline-none focus:border-white/20 focus:ring-0"></textarea>
            </div>
            <div class="flex flex-wrap items-center gap-3">
              <button type="submit" class="inline-flex items-center gap-2 rounded-md bg-white text-[#0A0F1C] px-4 py-2 text-sm hover:bg-white/90">
                <i data-lucide="send" class="h-4 w-4"></i>
                Send Message
              </button>
              <a id="contactWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm text-white" style="background-color:#25D366;">
                <i data-lucide="message-circle" class="h-4 w-4"></i>
                Start a Project on WhatsApp
              </a>
            </div>
          </form>

          <div class="mt-8 grid sm:grid-cols-2 gap-4">
            <div class="rounded-lg border border-white/10 bg-white/5 p-4">
              <div class="flex items-center gap-2">
                <i data-lucide="mail" class="h-4 w-4 text-[#FF6B00]"></i>
                <h4 class="text-sm font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Email</h4>
              </div>
              <p class="mt-1 text-sm text-white/70" id="contactEmail">stephen@bi-okoto.com</p>
            </div>
            <div class="rounded-lg border border-white/10 bg-white/5 p-4">
              <div class="flex items-center gap-2">
                <i data-lucide="map-pin" class="h-4 w-4 text-[#FF6B00]"></i>
                <h4 class="text-sm font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Address</h4>
              </div>
              <p class="mt-1 text-sm text-white/70" id="contactAddress">4, Mbere Close, Morogbo Bus Stop, Agbara, Badagry, Lagos</p>
            </div>
          </div>
        </div>

        <!-- Map / Visual -->
        <div>
          <div class="rounded-xl border border-white/10 bg-white/5 overflow-hidden">
            <div class="aspect-[4/3] relative">
              <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop" alt="Lagos skyline abstract" class="absolute inset-0 h-full w-full object-cover">
              <div class="absolute inset-0 bg-gradient-to-t from-[#0A0F1C]/70 via-transparent to-transparent"></div>
              <div class="absolute bottom-0 left-0 right-0 p-4 flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm text-white/80">
                  <i data-lucide="map" class="h-4 w-4 text-[#FF6B00]"></i>
                  Agbara, Badagry
                </div>
                <a id="contactMapWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-3 py-2 text-xs text-white hover:bg-[#ff7b1b]">
                  <i data-lucide="message-circle" class="h-4 w-4"></i>
                  WhatsApp Now
                </a>
              </div>
            </div>
          </div>
          <p class="mt-3 text-xs text-white/50">Serving clients across Lagos, Nigeria and beyond.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-md border border-white/10 bg-white/5 grid place-items-center overflow-hidden">
            <img id="footerLogo" src="" alt="DP Logo" class="h-full w-full object-contain p-1 hidden">
            <span id="footerLogoFallback" class="text-white font-medium tracking-tight" style="font-size:14px; letter-spacing:-0.02em;">DP</span>
          </div>
          <span class="text-sm text-white/70">Deyoungprof Creative Hub</span>
        </div>
        <div class="flex items-center gap-3">
          <a id="footerWhatsApp" href="https://wa.me/2348147732687" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-4 py-2 text-sm text-white hover:bg-[#ff7b1b]">
            <i data-lucide="message-circle" class="h-4 w-4"></i>
            WhatsApp
          </a>
          <a id="footerInstagram" href="#" class="inline-flex items-center gap-2 rounded-md border border-white/10 bg-white/0 px-4 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 hover:border-white/20">
            <i data-lucide="instagram" class="h-4 w-4"></i>
            Instagram
          </a>
        </div>
      </div>
      <div class="mt-6 flex items-center justify-between text-xs text-white/50">
        <p>© 2025 Deyoungprof Creative Hub. All rights reserved.</p>
        <p>Built for impact — Lagos, Nigeria.</p>
      </div>
    </div>
  </footer>

  <!-- Firebase & App Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getFirestore, collection, getDocs, doc, getDoc, query, orderBy, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCVhKuw3k3gmAlJMjMzXtRlc9FAcT_-ks8",
      authDomain: "deyoungprof-creative-hub.firebaseapp.com",
      projectId: "deyoungprof-creative-hub",
      storageBucket: "deyoungprof-creative-hub.firebasestorage.app",
      messagingSenderId: "753963504321",
      appId: "1:753963504321:web:ab4f16cace407e2c5b3a40"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Global state
    let carouselSlides = [];
    let carouselIndex = 0;
    let portfolioData = {};
    let currentGallery = [];
    let currentGalleryIndex = 0;
    let siteSettings = {};

    // Initialize
    document.addEventListener('DOMContentLoaded', async () => {
      if (window.lucide) window.lucide.createIcons();
      // Initialize theme
initializeTheme();

// Show page loader
      const pageLoader = document.getElementById('pageLoader');
      
      try {
        await loadSiteData();
        
        // Initialize all interactive features
        initializeCarousel();
        initializeMobileMenu();
        initializeHeader();
        initializeContactForm();
        
        // Setup gallery navigation (do this after portfolio loads)
        setupGalleryNavigation();
        
        console.log('✅ All features initialized');
        
        // Hide loader after everything loads
        setTimeout(() => {
          pageLoader.classList.add('fade-out');
          setTimeout(() => {
            pageLoader.style.display = 'none';
          }, 300);
        }, 500); // Small delay to ensure smooth transition
      } catch (error) {
        console.error('Initialization error:', error);
        // Hide loader even on error
        pageLoader.classList.add('fade-out');
        setTimeout(() => {
          pageLoader.style.display = 'none';
        }, 300);
      }
    });

    async function loadSiteData() {
      try {
        await Promise.all([
  loadSettings(),
  loadCarousel(),
  loadServices(),
  loadPortfolio(),
  loadHeroHighlights(),
  loadTeamMembers()
]);
        console.log('✅ All site data loaded successfully');
      } catch (error) {
        console.error('❌ Error loading site data:', error);
        // Show user-friendly message
        const sections = ['servicesList', 'portfolioCategories'];
        sections.forEach(id => {
          const el = document.getElementById(id);
          if (el) el.innerHTML = '<p class="text-white/60">Unable to load content. Please refresh the page.</p>';
        });
      }
    }
    // Load settings
    async function loadSettings() {
      try {
        const settingsDoc = await getDoc(doc(db, 'siteSettings', 'main'));
        if (settingsDoc.exists()) {
          siteSettings = settingsDoc.data();
          
          // Update WhatsApp links
          const phone = siteSettings.contact?.phone || '2348147732687';
          const whatsappUrl = `https://wa.me/${phone}`;
          document.querySelectorAll('#headerWhatsApp, #heroWhatsApp, #servicesWhatsApp, #servicesWhatsApp2, #contactWhatsApp, #contactMapWhatsApp, #footerWhatsApp, #galleryWhatsApp').forEach(el => {
            el.href = whatsappUrl;
          });

          // Update contact info
document.getElementById('contactEmail').textContent = siteSettings.contact?.email || 'stephen@bi-okoto.com';
document.getElementById('contactAddress').textContent = siteSettings.contact?.address || '4, Mbere Close, Morogbo Bus Stop, Agbara, Badagry, Lagos';

// Update Instagram
const instagramUrl = siteSettings.social?.instagram || '#';
document.getElementById('footerInstagram').href = instagramUrl;

          // Update logos
if (siteSettings.logos?.main) {
  const headerLogo = document.getElementById('headerLogo');
  const footerLogo = document.getElementById('footerLogo');
  
  if (headerLogo) {
    headerLogo.src = siteSettings.logos.main;
    headerLogo.classList.remove('hidden');
    headerLogo.onerror = function() {
      this.classList.add('hidden');
      const fallback = document.getElementById('headerLogoFallback');
      if (fallback) fallback.classList.remove('hidden');
    };
    const fallback = document.getElementById('headerLogoFallback');
    if (fallback) fallback.classList.add('hidden');
  }
  
  if (footerLogo) {
    footerLogo.src = siteSettings.logos.main;
    footerLogo.classList.remove('hidden');
    footerLogo.onerror = function() {
      this.classList.add('hidden');
      const fallback = document.getElementById('footerLogoFallback');
      if (fallback) fallback.classList.remove('hidden');
    };
    const fallback = document.getElementById('footerLogoFallback');
    if (fallback) fallback.classList.add('hidden');
  }
}

// Update location image
if (siteSettings.location?.imageUrl) {
  const locationImg = document.querySelector('#contact .aspect-\\[4\\/3\\] img');
  if (locationImg) {
    locationImg.src = siteSettings.location.imageUrl;
    locationImg.alt = siteSettings.contact?.locationText || 'Location image';
  }
}

// Update location text
if (siteSettings.contact?.locationText) {
  // Target the location text more specifically
  const locationTextElements = document.querySelectorAll('#contact .aspect-\\[4\\/3\\] .text-white\\/80');
  locationTextElements.forEach(el => {
    // Only update if it contains map icon (the location display element)
    if (el.querySelector('[data-lucide="map"]')) {
      // Clear existing text and rebuild
      const icon = el.querySelector('i');
      el.textContent = '';
      if (icon) el.appendChild(icon);
      el.appendChild(document.createTextNode(' ' + siteSettings.contact.locationText));
    }
  });
}
        }
      } catch (error) {
        console.error('Settings error:', error);
      }
    }

    // Load hero highlights
    async function loadHeroHighlights() {
      try {
        const q = query(collection(db, 'heroHighlights'), where('active', '==', true), orderBy('order'));
        const snapshot = await getDocs(q);
        
        const container = document.getElementById('heroHighlights');
        
        if (snapshot.empty) {
          // Show default/placeholder if no highlights exist
          container.innerHTML = `
            <div class="col-span-full text-center py-8">
              <p class="text-white/40 text-sm">No highlights configured yet.</p>
            </div>
          `;
          return;
        }

        container.innerHTML = '';
        snapshot.forEach(doc => {
          const data = doc.data();
          const card = document.createElement('div');
          card.className = 'rounded-lg border border-white/10 bg-white/5 p-5 hover:bg-white/10 hover:border-white/20 transition-colors';
          card.innerHTML = `
            <div class="flex items-center gap-3">
              <i data-lucide="${data.icon}" class="h-6 w-6 text-[#FF6B00]"></i>
              <h3 class="text-base font-medium text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.title}</h3>
            </div>
            <p class="mt-2 text-sm text-white/60">${data.description}</p>
          `;
          container.appendChild(card);
        });

        if (window.lucide) window.lucide.createIcons();
      } catch (error) {
        console.error('Hero highlights error:', error);
        // Show fallback on error
        const container = document.getElementById('heroHighlights');
        container.innerHTML = `
          <div class="col-span-full text-center py-8">
            <p class="text-white/40 text-sm">Unable to load highlights.</p>
          </div>
        `;
      }
    }

// Load team members
async function loadTeamMembers() {
  try {
    // Load team members
    const q = query(collection(db, 'teamMembers'), where('active', '==', true), orderBy('order'));
    const snapshot = await getDocs(q);
    
    // Load settings to check if "Join Our Team" card should show
    const settingsDoc = await getDoc(doc(db, 'siteSettings', 'main'));
    const showJoinTeam = settingsDoc.exists() ? settingsDoc.data().teamSettings?.showJoinTeam : false;
    
    const container = document.getElementById('teamMembersGrid');
    
    if (snapshot.empty && !showJoinTeam) {
      container.innerHTML = `
        <div class="col-span-full text-center py-12">
          <p class="text-white/40 text-sm">Our team section is coming soon.</p>
        </div>
      `;
      return;
    }

    container.innerHTML = '';
    
    // Render team members
    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const card = document.createElement('div');
      
      // CEO gets special styling - spans 2 columns on desktop
      if (data.isCEO) {
        card.className = 'rounded-xl border-2 border-[#FF6B00]/30 bg-gradient-to-br from-[#FF6B00]/5 to-white/5 overflow-hidden lg:col-span-2 hover:border-[#FF6B00]/50 transition-all duration-300';
        card.innerHTML = `
          <div class="grid lg:grid-cols-2 gap-0">
            <div class="aspect-[4/3] lg:aspect-auto bg-black/20 relative">
              <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover">
              <div class="absolute top-3 right-3 bg-[#FF6B00] text-white text-xs font-semibold px-3 py-1.5 rounded-full shadow-lg">
                <i data-lucide="crown" class="h-3 w-3 inline mr-1"></i>
                Founder & CEO
              </div>
            </div>
            <div class="p-6 lg:p-8 flex flex-col justify-center">
              <h3 class="text-xl font-semibold text-white mb-2" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.name}</h3>
              <p class="text-[#FF6B00] text-sm font-medium mb-4">${data.role}</p>
              <p class="text-sm text-white/70 leading-relaxed">${data.bio}</p>
              <div class="mt-6 flex items-center gap-2 text-sm text-white/60">
                <i data-lucide="map-pin" class="h-4 w-4 text-[#FF6B00]"></i>
                <span>Lagos, Nigeria</span>
              </div>
            </div>
          </div>
        `;
      } else {
        // Regular team member card
        card.className = 'rounded-xl border border-white/10 bg-white/5 overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300 group';
        card.innerHTML = `
          <div class="aspect-[4/3] bg-black/20 relative overflow-hidden">
            <img src="${data.imageUrl}" alt="${data.name}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105">
          </div>
          <div class="p-5">
            <h3 class="text-base font-semibold text-white mb-1" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.name}</h3>
            <p class="text-[#FF6B00] text-sm font-medium mb-3">${data.role}</p>
            <p class="text-xs text-white/60 leading-relaxed">${data.bio}</p>
          </div>
        `;
      }
      
      container.appendChild(card);
    });
    
    // Add "Join Our Team" card if enabled
    if (showJoinTeam) {
      const joinCard = document.createElement('div');
      joinCard.className = 'rounded-xl border-2 border-dashed border-white/20 bg-white/5 p-8 flex flex-col items-center justify-center text-center hover:border-[#FF6B00]/50 hover:bg-[#FF6B00]/5 transition-all duration-300 group cursor-pointer';
      joinCard.innerHTML = `
        <div class="h-16 w-16 rounded-full bg-[#FF6B00]/10 flex items-center justify-center mb-4 group-hover:bg-[#FF6B00]/20 transition-colors">
          <i data-lucide="user-plus" class="h-8 w-8 text-[#FF6B00]"></i>
        </div>
        <h3 class="text-lg font-semibold text-white mb-2" style="font-family: 'Nexa Bold','Poppins',sans-serif;">Join Our Team</h3>
        <p class="text-sm text-white/60 mb-4 max-w-xs">
          We're always looking for talented designers to join our creative family.
        </p>
        <a href="#contact" class="inline-flex items-center gap-2 rounded-md bg-[#FF6B00] px-4 py-2 text-sm text-white hover:bg-[#ff7b1b] transition-colors">
          <span>Get in Touch</span>
          <i data-lucide="arrow-right" class="h-4 w-4"></i>
        </a>
      `;
      container.appendChild(joinCard);
    }

    if (window.lucide) window.lucide.createIcons();
    
  } catch (error) {
    console.error('Team members load error:', error);
    const container = document.getElementById('teamMembersGrid');
    container.innerHTML = `
      <div class="col-span-full text-center py-12">
        <p class="text-white/40 text-sm">Unable to load team members.</p>
      </div>
    `;
  }
}

    // Load carousel
    async function loadCarousel() {
      try {
        const q = query(collection(db, 'carouselSlides'), where('active', '==', true), orderBy('order'));
        const snapshot = await getDocs(q);
        
        carouselSlides = [];
        snapshot.forEach(doc => {
          carouselSlides.push(doc.data());
        });

        if (carouselSlides.length > 0) {
          renderCarousel();
        }
      } catch (error) {
        console.error('Carousel error:', error);
      }
    }

    function renderCarousel() {
      const track = document.getElementById('carouselTrack');
      track.innerHTML = carouselSlides.map((slide, index) => `
        <div class="inline-block align-top w-full h-full">
  <div class="h-full bg-black/30 relative cursor-pointer group" data-carousel-index="${index}">
            <img src="${slide.imageUrl}" alt="${slide.title}" class="absolute inset-0 h-full w-full object-contain transition-transform duration-500 group-hover:scale-105">
            <div class="absolute inset-0 bg-gradient-to-t from-[#0A0F1C]/80 via-transparent to-transparent"></div>
            <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
              <div class="rounded-full bg-white/20 backdrop-blur-sm p-4 border border-white/30">
                <i data-lucide="maximize-2" class="h-6 w-6 text-white"></i>
              </div>
            </div>
            <div class="absolute bottom-0 left-0 right-0 p-5">
              <span class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs text-white/80">
                <i data-lucide="sparkles" class="h-4 w-4 text-[#FF6B00]"></i>
                ${slide.title}
              </span>
              <p class="mt-2 text-sm text-white/90">${slide.description}</p>
            </div>
          </div>
        </div>
      `).join('');

      // Generate dots
      const dots = document.getElementById('carouselDots');
      dots.innerHTML = carouselSlides.map((_, i) => `
        <button class="h-1.5 w-6 rounded-full ${i === 0 ? 'bg-white/40' : 'bg-white/20'} hover:bg-white/70 transition-colors" data-dot="${i}" aria-label="Slide ${i + 1}"></button>
      `).join('');

      if (window.lucide) window.lucide.createIcons();
    }

    function initializeCarousel() {
      const track = document.getElementById('carouselTrack');
      const prevBtn = document.getElementById('prevSlide');
      const nextBtn = document.getElementById('nextSlide');
      
      if (!track || carouselSlides.length === 0) {
        console.log('Carousel not ready - skipping initialization');
        return;
      }

      function goToSlide(index) {
        carouselIndex = (index + carouselSlides.length) % carouselSlides.length;
        track.style.transform = `translateX(-${carouselIndex * 100}%)`;
        
        document.querySelectorAll('[data-dot]').forEach((dot, i) => {
          dot.classList.toggle('bg-white/40', i === carouselIndex);
          dot.classList.toggle('bg-white/20', i !== carouselIndex);
        });
      }

      prevBtn?.addEventListener('click', () => goToSlide(carouselIndex - 1));
      nextBtn?.addEventListener('click', () => goToSlide(carouselIndex + 1));
      
      document.querySelectorAll('[data-dot]').forEach(dot => {
        dot.addEventListener('click', () => goToSlide(parseInt(dot.dataset.dot)));
      });

      // Add click listeners to carousel slides for lightbox
      document.querySelectorAll('[data-carousel-index]').forEach(slideEl => {
        slideEl.addEventListener('click', (e) => {
          // Don't open lightbox if clicking navigation buttons
          if (e.target.closest('#prevSlide') || e.target.closest('#nextSlide') || e.target.closest('[data-dot]')) {
            return;
          }
          
          const slideIndex = parseInt(slideEl.dataset.carouselIndex);
          const slide = carouselSlides[slideIndex];
          if (slide) {
            openImageLightbox(
              slide.imageUrl,
              slide.title,
              'Carousel Slide',
              '',
              slide
            );
          }
        });
      });

      // Auto-rotate
      setInterval(() => goToSlide(carouselIndex + 1), 6000);
    }

    // Load services
    async function loadServices() {
      try {
        const q = query(collection(db, 'services'), where('active', '==', true), orderBy('order'));
        const snapshot = await getDocs(q);
        
        const listEl = document.getElementById('servicesList');
        if (snapshot.empty) {
          listEl.innerHTML = '<p class="text-white/60 col-span-full">No services available yet.</p>';
          return;
        }

        listEl.innerHTML = '';
        snapshot.forEach(doc => {
          const data = doc.data();
          const article = document.createElement('article');
          article.className = 'rounded-xl border border-white/10 bg-white/5 p-5 hover:bg-white/10 hover:border-white/20 transition-colors';
          article.innerHTML = `
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <i data-lucide="${data.icon}" class="h-5 w-5 text-[#FF6B00]"></i>
                <h3 class="text-base font-semibold text-white" style="font-family: 'Nexa Bold','Poppins',sans-serif;">${data.name}</h3>
              </div>
              <span class="text-sm text-white/80">${data.price}</span>
            </div>
            <p class="mt-2 text-sm text-white/60">${data.description}</p>
          `;
          listEl.appendChild(article);
        });

        if (window.lucide) window.lucide.createIcons();
      } catch (error) {
        console.error('Services error:', error);
      }
    }

    // Load portfolio
    async function loadPortfolio() {
      try {
        const q = query(collection(db, 'portfolioItems'), orderBy('order'));
        const snapshot = await getDocs(q);
        
        portfolioData = {};
        snapshot.forEach(doc => {
          const data = doc.data();
          if (!portfolioData[data.category]) {
            portfolioData[data.category] = {
              display: data.categoryDisplay,
              items: []
            };
          }
          portfolioData[data.category].items.push(data);
        });

        renderPortfolioCategories();
      } catch (error) {
        console.error('Portfolio error:', error);
      }
    }

    function renderPortfolioCategories() {
      const container = document.getElementById('portfolioCategories');
      
      if (Object.keys(portfolioData).length === 0) {
        container.innerHTML = '<p class="text-white/60 col-span-full">No portfolio items yet.</p>';
        return;
      }

      const categoryIcons = {
        birthday: 'sparkles', academic: 'book-open', wedding: 'heart',
        business: 'megaphone', movie: 'clapperboard', church: 'church', brand: 'pen-tool'
      };

      container.innerHTML = '';
      Object.keys(portfolioData).forEach(category => {
        const data = portfolioData[category];
        const card = document.createElement('button');
        card.className = 'rounded-xl border border-white/10 bg-white/5 p-6 hover:bg-white/10 hover:border-white/20 transition-colors text-left group cursor-pointer';
        card.innerHTML = `
          <div class="flex items-center gap-3 mb-3">
            <i data-lucide="${categoryIcons[category] || 'image'}" class="h-6 w-6 text-[#FF6B00]"></i>
            <h3 class="text-base font-semibold text-white group-hover:text-[#FF6B00] transition-colors">${data.display}</h3>
          </div>
          <p class="text-sm text-white/60">${data.items.length} design${data.items.length !== 1 ? 's' : ''}</p>
          <div class="mt-4 flex items-center gap-2 text-xs text-white/50">
            <span>Click to view gallery</span>
            <i data-lucide="arrow-right" class="h-3 w-3"></i>
          </div>
        `;
        
        card.addEventListener('click', () => openGallery(category));
        container.appendChild(card);
      });

      if (window.lucide) window.lucide.createIcons();
    }

    // Gallery functions
    function openGallery(category) {
      if (!portfolioData[category]) return;
      
      currentGallery = portfolioData[category].items;
      currentGalleryIndex = 0;
      
      document.getElementById('galleryTitle').textContent = portfolioData[category].display;
      document.getElementById('portfolioGallery').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      // Show loading spinner briefly
      const spinner = document.getElementById('galleryLoadingSpinner');
      const cardStack = document.getElementById('cardStack');
      
      spinner.classList.remove('hidden');
      cardStack.style.opacity = '0';
      
      // Render cards with slight delay for smooth transition
      setTimeout(() => {
        renderCardStack();
        spinner.classList.add('hidden');
        cardStack.style.opacity = '1';
        if (window.lucide) window.lucide.createIcons();
      }, 300);
    }

    function renderCardStack() {
      const stack = document.getElementById('cardStack');
      if (!stack || !currentGallery || currentGallery.length === 0) {
        console.error('Cannot render card stack - missing data');
        return;
      }
      
      const totalCards = currentGallery.length;
      
      document.getElementById('galleryCounter').textContent = `${currentGalleryIndex + 1} / ${totalCards}`;
      
      stack.innerHTML = currentGallery.map((item, index) => {
        let positionClass = 'hidden';
        const diff = index - currentGalleryIndex;
        
        if (diff === 0) positionClass = 'featured';
        else if (diff === -1 || (currentGalleryIndex === 0 && index === totalCards - 1)) positionClass = 'left';
        else if (diff === 1 || (currentGalleryIndex === totalCards - 1 && index === 0)) positionClass = 'right';
        
        return `
          <div class="stack-card ${positionClass} border border-white/10 bg-[#0B0F19] ${diff === 0 ? 'cursor-pointer hover:opacity-90 transition-opacity' : ''}" data-index="${index}">
            <div class="aspect-square bg-black/20 flex items-center justify-center p-4 relative group">
              <img src="${item.imageUrl}" alt="${item.title}" class="max-h-full max-w-full object-contain">
              ${diff === 0 ? `
                <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30">
                  <div class="rounded-full bg-white/20 backdrop-blur-sm p-3 border border-white/30">
                    <i data-lucide="maximize-2" class="h-6 w-6 text-white"></i>
                  </div>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }).join('');

      // Add click listeners to featured card
      const featuredCard = stack.querySelector('.stack-card.featured');
      if (featuredCard) {
        featuredCard.addEventListener('click', () => {
          const current = currentGallery[currentGalleryIndex];
          openImageLightbox(
            current.imageUrl,
            current.title,
            current.categoryDisplay || current.category,
            current.price,
            current
          );
        });
      }

      updateGalleryInfo();
      if (window.lucide) window.lucide.createIcons();
    }

    function updateGalleryInfo() {
      const current = currentGallery[currentGalleryIndex];
      document.getElementById('currentTitle').textContent = current.title;
      document.getElementById('currentPrice').textContent = current.price;
      
      const phone = siteSettings.contact?.phone || '2348147732687';
      const message = encodeURIComponent(`Hello Deyoungprof, I am interested in: ${current.title} (${current.price}).`);
      document.getElementById('galleryWhatsApp').href = `https://wa.me/${phone}?text=${message}`;
    }

    function navigateGallery(direction) {
      if (!currentGallery || currentGallery.length === 0) return;
      
      // Add loading indicator during navigation
      const cardStack = document.getElementById('cardStack');
      cardStack.style.opacity = '0.5';
      cardStack.style.pointerEvents = 'none';
      
      // Calculate new index with wrapping
      currentGalleryIndex = (currentGalleryIndex + direction + currentGallery.length) % currentGallery.length;
      
      // Small delay for smooth transition
      setTimeout(() => {
        // Re-render the card stack
        renderCardStack();
        
        // Restore opacity
        cardStack.style.opacity = '1';
        cardStack.style.pointerEvents = 'auto';
        
      }, 150);
    }

    // Gallery navigation event listeners (set up once, reused for all galleries)
    function setupGalleryNavigation() {
      // Close button
      document.getElementById('closeGallery')?.addEventListener('click', () => {
        document.getElementById('portfolioGallery').classList.add('hidden');
        document.body.style.overflow = '';
      });

      // Previous button
      document.getElementById('prevCard')?.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        navigateGallery(-1);
      });

      // Next button
      document.getElementById('nextCard')?.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        navigateGallery(1);
      });

      // Close gallery on background click
      document.getElementById('portfolioGallery')?.addEventListener('click', (e) => {
        if (e.target.id === 'portfolioGallery') {
          document.getElementById('portfolioGallery').classList.add('hidden');
          document.body.style.overflow = '';
        }
      });
    }

    // Call setup once
    setupGalleryNavigation();

    // Keyboard navigation for gallery and lightbox
    document.addEventListener('keydown', (e) => {
      const galleryOpen = !document.getElementById('portfolioGallery').classList.contains('hidden');
      const lightboxOpen = !document.getElementById('imageLightbox').classList.contains('hidden');
      
      // If lightbox is open, only allow ESC to close it
      if (lightboxOpen) {
        if (e.key === 'Escape') {
          closeLightbox();
          e.preventDefault();
        }
        return; // Don't handle other keys when lightbox is open
      }
      
      // If gallery is open, handle navigation
      if (galleryOpen) {
        if (e.key === 'ArrowLeft') {
          e.preventDefault();
          navigateGallery(-1);
        } else if (e.key === 'ArrowRight') {
          e.preventDefault();
          navigateGallery(1);
        } else if (e.key === 'Escape') {
          e.preventDefault();
          document.getElementById('portfolioGallery').classList.add('hidden');
          document.body.style.overflow = '';
        }
      }
    });

    // Mobile menu
    function initializeMobileMenu() {
      const btn = document.getElementById('mobileMenuBtn');
      const menu = document.getElementById('mobileMenu');
      let isOpen = false;

      btn?.addEventListener('click', () => {
        isOpen = !isOpen;
        menu.style.maxHeight = isOpen ? '320px' : '0px';
      });

      menu.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          isOpen = false;
          menu.style.maxHeight = '0px';
        });
      });
    }

    // Header scroll behavior
function initializeHeader() {
  const header = document.getElementById('site-header');
  const updateHeader = () => {
    const scrolled = window.scrollY > 8;
    if (scrolled) {
      header.style.backgroundColor = 'var(--header-bg)';
      header.style.backdropFilter = 'blur(16px) saturate(180%)';
      header.style.webkitBackdropFilter = 'blur(16px) saturate(180%)';
      header.style.borderBottom = '1px solid var(--border-color)';
    } else {
      header.style.backgroundColor = 'transparent';
      header.style.backdropFilter = 'none';
      header.style.webkitBackdropFilter = 'none';
      header.style.borderBottom = 'none';
    }
  };
  updateHeader();
  window.addEventListener('scroll', updateHeader);
}

    // Contact form
    function initializeContactForm() {
      const form = document.getElementById('contactForm');
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const message = form.message.value.trim();
        const phone = siteSettings.contact?.phone || '2348147732687';
        const waText = `Hello Deyoungprof,%0A%0AName: ${encodeURIComponent(name)}%0AEmail: ${encodeURIComponent(email)}%0A%0AProject:%0A${encodeURIComponent(message)}`;
        window.open(`https://wa.me/${phone}?text=${waText}`, '_blank', 'noopener');
      });
    }

    // ========== LIGHTBOX FUNCTIONS - NEW SECTION ==========
    function openImageLightbox(imageUrl, title, category, price, itemData = null) {
      const lightboxImage = document.getElementById('lightboxImage');
      
      // Show loading state
      lightboxImage.style.opacity = '0.3';
      lightboxImage.classList.add('loading-pulse');
      
      // Create a new image to preload
      const img = new Image();
      img.onload = () => {
        lightboxImage.src = imageUrl;
        lightboxImage.style.opacity = '1';
        lightboxImage.classList.remove('loading-pulse');
      };
      img.onerror = () => {
        lightboxImage.style.opacity = '1';
        lightboxImage.classList.remove('loading-pulse');
      };
      img.src = imageUrl;
      
      document.getElementById('lightboxTitle').textContent = 'Full View';
      document.getElementById('lightboxItemTitle').textContent = title || '';
      document.getElementById('lightboxCategory').textContent = category || '';
      document.getElementById('lightboxPrice').textContent = price || '';
      
      const phone = siteSettings.contact?.phone || '2348147732687';
      const message = encodeURIComponent(`Hello Deyoungprof, I am interested in: ${title} (${price}).`);
      document.getElementById('lightboxWhatsApp').href = `https://wa.me/${phone}?text=${message}`;
      
      document.getElementById('imageLightbox').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      if (window.lucide) window.lucide.createIcons();
    }

    function closeLightbox() {
      document.getElementById('imageLightbox').classList.add('hidden');
      
      // Check if gallery is still open behind lightbox
      const galleryOpen = !document.getElementById('portfolioGallery').classList.contains('hidden');
      if (galleryOpen) {
        // Keep body overflow hidden if gallery is still open
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    }

    // Lightbox event listeners
    document.getElementById('closeLightbox')?.addEventListener('click', closeLightbox);
    
    document.getElementById('imageLightbox')?.addEventListener('click', (e) => {
      if (e.target.id === 'imageLightbox') closeLightbox();
    });

    // ========== END LIGHTBOX FUNCTIONS ==========

    // ========== THEME TOGGLE FUNCTIONS ==========
function initializeTheme() {
  // Check for saved theme preference or default to system preference
  const savedTheme = localStorage.getItem('deyoungprof-theme');
  let initialTheme;
  
  if (savedTheme) {
    initialTheme = savedTheme;
  } else {
    // Detect system preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    initialTheme = prefersDark ? 'dark' : 'light';
  }
  
  applyTheme(initialTheme);
  
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
  }
  
  // Listen for system theme changes (optional - only if user hasn't manually set theme)
  if (!savedTheme) {
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      const newTheme = e.matches ? 'dark' : 'light';
      applyTheme(newTheme);
    });
  }
}

    function applyTheme(theme) {
      if (theme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        updateThemeIcon('moon');
      } else {
        document.documentElement.removeAttribute('data-theme');
        updateThemeIcon('sun');
      }
      localStorage.setItem('deyoungprof-theme', theme);
    }

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      applyTheme(newTheme);
    }

    function updateThemeIcon(iconName) {
      const themeIcon = document.getElementById('themeIcon');
      if (themeIcon && window.lucide) {
        themeIcon.setAttribute('data-lucide', iconName);
        window.lucide.createIcons();
      }
    }
    // ========== END THEME TOGGLE FUNCTIONS ==========
  </script>
</body>
</html>